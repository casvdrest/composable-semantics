<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>MonadicFragment</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Pragma">--without-K</a> <a id="32" class="Symbol">#-}</a>

<a id="37" class="Keyword">open</a> <a id="42" class="Keyword">import</a> <a id="49" href="Box.html" class="Module">Box</a>
<a id="53" class="Keyword">import</a> <a id="60" href="Level.html" class="Module">Level</a> <a id="66" class="Symbol">as</a> <a id="69" class="Module">L</a>

<a id="72" class="Keyword">module</a> <a id="79" href="MonadicFragment.html" class="Module">MonadicFragment</a> <a id="95" class="Symbol">(</a><a id="96" href="MonadicFragment.html#96" class="Bound">Ix</a> <a id="99" class="Symbol">:</a> <a id="101" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="105" class="Symbol">→</a> <a id="107" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="110" class="Symbol">)</a> <a id="112" class="Symbol">⦃</a> <a id="114" href="MonadicFragment.html#114" class="Bound">ix-rel</a> <a id="121" class="Symbol">:</a> <a id="123" class="Symbol">∀</a> <a id="125" class="Symbol">{</a><a id="126" href="MonadicFragment.html#126" class="Bound">A</a><a id="127" class="Symbol">}</a> <a id="129" class="Symbol">→</a> <a id="131" href="Box.html#172" class="Record">Rel₂</a> <a id="136" href="Level.html#512" class="Function">L.0ℓ</a> <a id="141" class="Symbol">(</a><a id="142" href="MonadicFragment.html#96" class="Bound">Ix</a> <a id="145" href="MonadicFragment.html#126" class="Bound">A</a><a id="146" class="Symbol">)</a> <a id="148" class="Symbol">⦄</a> <a id="150" class="Keyword">where</a>

<a id="157" class="Keyword">open</a> <a id="162" class="Keyword">import</a> <a id="169" href="Data.List.html" class="Module">Data.List</a>
<a id="179" class="Keyword">open</a> <a id="184" class="Keyword">import</a> <a id="191" href="Data.List.Relation.Unary.All.html" class="Module">Data.List.Relation.Unary.All</a> <a id="220" class="Keyword">renaming</a> <a id="229" class="Symbol">(</a><a id="230" href="Data.List.Relation.Unary.All.html#3052" class="Function">map</a> <a id="234" class="Symbol">to</a> <a id="237" href="MonadicFragment.html#237" class="Function">amap</a><a id="241" class="Symbol">)</a>
<a id="243" class="Keyword">open</a> <a id="248" class="Keyword">import</a> <a id="255" href="Data.List.Relation.Binary.Sublist.Propositional.html" class="Module">Data.List.Relation.Binary.Sublist.Propositional</a>

<a id="304" class="Keyword">open</a> <a id="309" class="Keyword">import</a> <a id="316" href="Data.Product.html" class="Module">Data.Product</a>                 <a id="345" class="Keyword">renaming</a> <a id="354" class="Symbol">(</a><a id="355" href="Data.Product.html#2450" class="Function">map</a> <a id="359" class="Symbol">to</a> <a id="Product.map"></a><a id="362" href="MonadicFragment.html#362" class="Function">pmap</a><a id="366" class="Symbol">)</a>
<a id="368" class="Keyword">open</a> <a id="373" class="Keyword">import</a> <a id="380" href="Data.Maybe.html" class="Module">Data.Maybe</a>                   <a id="409" class="Keyword">using</a> <a id="415" class="Symbol">(</a><a id="416" href="Data.Maybe.Base.html#838" class="Datatype">Maybe</a> <a id="422" class="Symbol">;</a> <a id="424" href="Data.Maybe.Base.html#892" class="InductiveConstructor">just</a> <a id="429" class="Symbol">;</a> <a id="431" href="Data.Maybe.Base.html#872" class="InductiveConstructor">nothing</a><a id="438" class="Symbol">)</a>

<a id="441" class="Keyword">open</a> <a id="446" class="Keyword">import</a> <a id="453" href="Relation.Unary.html" class="Module">Relation.Unary</a>               <a id="482" class="Keyword">hiding</a> <a id="489" class="Symbol">(</a><a id="490" href="Relation.Unary.html#1742" class="Function Operator">_⊆_</a> <a id="494" class="Symbol">;</a> <a id="496" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="500" class="Symbol">)</a>

<a id="503" class="Keyword">open</a> <a id="508" class="Keyword">import</a> <a id="515" href="Core.html" class="Module">Core</a>
<a id="520" class="Keyword">open</a> <a id="525" class="Keyword">import</a> <a id="532" href="Signature.html" class="Module">Signature</a>
<a id="542" class="Keyword">open</a> <a id="547" class="Keyword">import</a> <a id="554" href="Canon.html" class="Module">Canon</a>
<a id="560" class="Keyword">open</a> <a id="565" class="Keyword">import</a> <a id="572" href="Fragment.html" class="Module">Fragment</a>
<a id="581" class="Keyword">open</a> <a id="586" class="Keyword">import</a> <a id="593" href="Structure.Monad.html" class="Module">Structure.Monad</a>

<a id="610" class="Keyword">open</a> <a id="615" class="Keyword">import</a> <a id="622" href="Function.html" class="Module">Function</a>


<a id="633" class="Keyword">module</a> <a id="640" href="MonadicFragment.html#640" class="Module">_</a> <a id="642" class="Keyword">where</a>

  <a id="651" class="Comment">--</a>
  <a id="656" class="Comment">-- The sort `Eff` contains monads on `Ix`-indexed sets, parameterized over a set of values and context </a>
  <a id="762" class="Comment">-- </a>
  <a id="768" href="MonadicFragment.html#768" class="Function">Eff</a> <a id="772" class="Symbol">:</a> <a id="774" href="Agda.Primitive.html#326" class="Primitive">Set₁</a>
  <a id="781" href="MonadicFragment.html#768" class="Function">Eff</a> <a id="785" class="Symbol">=</a> <a id="787" class="Symbol">∀</a> <a id="789" class="Symbol">{</a><a id="790" href="MonadicFragment.html#790" class="Bound">σ</a><a id="791" class="Symbol">}</a> <a id="793" class="Symbol">→</a> <a id="795" class="Symbol">(</a><a id="796" href="MonadicFragment.html#796" class="Bound">V</a> <a id="798" class="Symbol">:</a> <a id="800" href="Signature.html#1143" class="Datatype">μ</a> <a id="802" href="MonadicFragment.html#790" class="Bound">σ</a> <a id="804" class="Symbol">→</a> <a id="806" class="Symbol">(</a><a id="807" href="MonadicFragment.html#96" class="Bound">Ix</a> <a id="810" class="Symbol">(</a><a id="811" href="Signature.html#1143" class="Datatype">μ</a> <a id="813" href="MonadicFragment.html#790" class="Bound">σ</a><a id="814" class="Symbol">))</a> <a id="817" class="Symbol">→</a> <a id="819" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="822" class="Symbol">)</a>
              <a id="838" class="Symbol">→</a> <a id="840" class="Symbol">(</a><a id="841" href="MonadicFragment.html#841" class="Bound">Γ</a> <a id="843" class="Symbol">:</a> <a id="845" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="850" class="Symbol">(</a><a id="851" href="Signature.html#1143" class="Datatype">μ</a> <a id="853" href="MonadicFragment.html#790" class="Bound">σ</a><a id="854" class="Symbol">))</a>
              <a id="871" class="Symbol">→</a> <a id="873" class="Symbol">(</a><a id="874" href="MonadicFragment.html#96" class="Bound">Ix</a> <a id="877" class="Symbol">(</a><a id="878" href="Signature.html#1143" class="Datatype">μ</a> <a id="880" href="MonadicFragment.html#790" class="Bound">σ</a><a id="881" class="Symbol">)</a> <a id="883" class="Symbol">→</a> <a id="885" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="888" class="Symbol">)</a> <a id="890" class="Symbol">→</a> <a id="892" href="MonadicFragment.html#96" class="Bound">Ix</a> <a id="895" class="Symbol">(</a><a id="896" href="Signature.html#1143" class="Datatype">μ</a> <a id="898" href="MonadicFragment.html#790" class="Bound">σ</a><a id="899" class="Symbol">)</a> <a id="901" class="Symbol">→</a> <a id="903" href="Agda.Primitive.html#326" class="Primitive">Set</a> 

<a id="909" class="Comment">--</a>
<a id="912" class="Comment">-- Bespoke monad/strength record types for the `Eff` type.</a>
<a id="971" class="Comment">-- These are just here to help Agda&#39;s inference for implicits. We could</a>
<a id="1043" class="Comment">-- (in principle) replace these with the general types for indexed monads, but</a>
<a id="1122" class="Comment">-- this results in large amounts of unsolved metas when writing interpreters.</a>
<a id="1200" class="Comment">--</a>
<a id="1203" class="Keyword">module</a> <a id="Itf"></a><a id="1210" href="MonadicFragment.html#1210" class="Module">Itf</a> <a id="1214" class="Keyword">where</a>

  <a id="1223" class="Keyword">open</a> <a id="1228" href="Canon.html#1228" class="Module">Canon.ICanon</a>

  <a id="1244" class="Keyword">record</a> <a id="Itf.Monadic"></a><a id="1251" href="MonadicFragment.html#1251" class="Record">Monadic</a> <a id="1259" class="Symbol">(</a><a id="1260" href="MonadicFragment.html#1260" class="Bound">M</a> <a id="1262" class="Symbol">:</a> <a id="1264" href="MonadicFragment.html#768" class="Function">Eff</a><a id="1267" class="Symbol">)</a> <a id="1269" class="Symbol">:</a> <a id="1271" href="Agda.Primitive.html#326" class="Primitive">Set₁</a> <a id="1276" class="Keyword">where</a>
    <a id="1286" class="Keyword">field</a> <a id="Itf.Monadic.isMonadic"></a><a id="1292" href="MonadicFragment.html#1292" class="Field">isMonadic</a> <a id="1302" class="Symbol">:</a> <a id="1304" class="Symbol">∀</a> <a id="1306" class="Symbol">{</a><a id="1307" href="MonadicFragment.html#1307" class="Bound">σ</a><a id="1308" class="Symbol">}</a> <a id="1310" class="Symbol">{</a><a id="1311" href="MonadicFragment.html#1311" class="Bound">V</a> <a id="1313" class="Symbol">:</a> <a id="1315" href="Signature.html#1143" class="Datatype">μ</a> <a id="1317" href="MonadicFragment.html#1307" class="Bound">σ</a> <a id="1319" class="Symbol">→</a> <a id="1321" href="MonadicFragment.html#96" class="Bound">Ix</a> <a id="1324" class="Symbol">(</a><a id="1325" href="Signature.html#1143" class="Datatype">μ</a> <a id="1327" href="MonadicFragment.html#1307" class="Bound">σ</a><a id="1328" class="Symbol">)</a> <a id="1330" class="Symbol">→</a> <a id="1332" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="1335" class="Symbol">}</a> <a id="1337" class="Symbol">{</a><a id="1338" href="MonadicFragment.html#1338" class="Bound">Γ</a> <a id="1340" class="Symbol">:</a> <a id="1342" href="Core.html#379" class="Function">Ctx</a> <a id="1346" class="Symbol">(</a><a id="1347" href="Signature.html#1143" class="Datatype">μ</a> <a id="1349" href="MonadicFragment.html#1307" class="Bound">σ</a><a id="1350" class="Symbol">)}</a> <a id="1353" class="Symbol">→</a> <a id="1355" href="Structure.Monad.html#456" class="Record">RawMonad</a> <a id="1364" class="Symbol">(</a><a id="1365" href="MonadicFragment.html#1260" class="Bound">M</a> <a id="1367" href="MonadicFragment.html#1311" class="Bound">V</a> <a id="1369" href="MonadicFragment.html#1338" class="Bound">Γ</a><a id="1370" class="Symbol">)</a>

    <a id="Itf.Monadic.return"></a><a id="1377" href="MonadicFragment.html#1377" class="Function">return</a> <a id="1384" class="Symbol">:</a> <a id="1386" class="Symbol">∀</a> <a id="1388" class="Symbol">{</a><a id="1389" href="MonadicFragment.html#1389" class="Bound">σ</a><a id="1390" class="Symbol">}</a> <a id="1392" class="Symbol">{</a><a id="1393" href="MonadicFragment.html#1393" class="Bound">V</a> <a id="1395" class="Symbol">:</a> <a id="1397" href="Signature.html#1143" class="Datatype">μ</a> <a id="1399" href="MonadicFragment.html#1389" class="Bound">σ</a> <a id="1401" class="Symbol">→</a> <a id="1403" href="MonadicFragment.html#96" class="Bound">Ix</a> <a id="1406" class="Symbol">(</a><a id="1407" href="Signature.html#1143" class="Datatype">μ</a> <a id="1409" href="MonadicFragment.html#1389" class="Bound">σ</a><a id="1410" class="Symbol">)</a> <a id="1412" class="Symbol">→</a> <a id="1414" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="1417" class="Symbol">}</a> <a id="1419" class="Symbol">{</a><a id="1420" href="MonadicFragment.html#1420" class="Bound">Γ</a> <a id="1422" class="Symbol">:</a> <a id="1424" href="Core.html#379" class="Function">Ctx</a> <a id="1428" class="Symbol">(</a><a id="1429" href="Signature.html#1143" class="Datatype">μ</a> <a id="1431" href="MonadicFragment.html#1389" class="Bound">σ</a><a id="1432" class="Symbol">)}</a> <a id="1435" class="Symbol">{</a><a id="1436" href="MonadicFragment.html#1436" class="Bound">P</a><a id="1437" class="Symbol">}</a>
             <a id="1452" class="Symbol">→</a> <a id="1454" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="1457" href="MonadicFragment.html#1436" class="Bound">P</a> <a id="1459" href="Relation.Unary.html#4338" class="Function Operator">⇒</a> <a id="1461" href="MonadicFragment.html#1260" class="Bound">M</a> <a id="1463" href="MonadicFragment.html#1393" class="Bound">V</a> <a id="1465" href="MonadicFragment.html#1420" class="Bound">Γ</a> <a id="1467" href="MonadicFragment.html#1436" class="Bound">P</a> <a id="1469" href="Relation.Unary.html#3359" class="Function">]</a>
    <a id="1475" href="MonadicFragment.html#1377" class="Function">return</a> <a id="1482" class="Symbol">=</a> <a id="1484" href="Structure.Monad.html#543" class="Field">RawMonad.return</a> <a id="1500" href="MonadicFragment.html#1292" class="Field">isMonadic</a>

    <a id="Itf.Monadic._&gt;&gt;=_"></a><a id="1515" href="MonadicFragment.html#1515" class="Function Operator">_&gt;&gt;=_</a> <a id="1521" class="Symbol">:</a>  <a id="1524" class="Symbol">∀</a> <a id="1526" class="Symbol">{</a><a id="1527" href="MonadicFragment.html#1527" class="Bound">σ</a><a id="1528" class="Symbol">}</a> <a id="1530" class="Symbol">{</a><a id="1531" href="MonadicFragment.html#1531" class="Bound">V</a> <a id="1533" class="Symbol">:</a> <a id="1535" href="Signature.html#1143" class="Datatype">μ</a> <a id="1537" href="MonadicFragment.html#1527" class="Bound">σ</a> <a id="1539" class="Symbol">→</a> <a id="1541" href="MonadicFragment.html#96" class="Bound">Ix</a> <a id="1544" class="Symbol">(</a><a id="1545" href="Signature.html#1143" class="Datatype">μ</a> <a id="1547" href="MonadicFragment.html#1527" class="Bound">σ</a><a id="1548" class="Symbol">)</a> <a id="1550" class="Symbol">→</a> <a id="1552" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="1555" class="Symbol">}</a> <a id="1557" class="Symbol">{</a><a id="1558" href="MonadicFragment.html#1558" class="Bound">Γ</a> <a id="1560" class="Symbol">:</a> <a id="1562" href="Core.html#379" class="Function">Ctx</a> <a id="1566" class="Symbol">(</a><a id="1567" href="Signature.html#1143" class="Datatype">μ</a> <a id="1569" href="MonadicFragment.html#1527" class="Bound">σ</a><a id="1570" class="Symbol">)}</a> <a id="1573" class="Symbol">{</a><a id="1574" href="MonadicFragment.html#1574" class="Bound">P</a> <a id="1576" href="MonadicFragment.html#1576" class="Bound">Q</a><a id="1577" class="Symbol">}</a>
             <a id="1592" class="Symbol">→</a> <a id="1594" class="Symbol">∀</a> <a id="1596" class="Symbol">{</a><a id="1597" href="MonadicFragment.html#1597" class="Bound">Σ</a><a id="1598" class="Symbol">}</a> <a id="1600" class="Symbol">→</a> <a id="1602" href="MonadicFragment.html#1260" class="Bound">M</a> <a id="1604" href="MonadicFragment.html#1531" class="Bound">V</a> <a id="1606" href="MonadicFragment.html#1558" class="Bound">Γ</a> <a id="1608" href="MonadicFragment.html#1574" class="Bound">P</a> <a id="1610" href="MonadicFragment.html#1597" class="Bound">Σ</a> <a id="1612" class="Symbol">→</a> <a id="1614" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="1617" href="MonadicFragment.html#1574" class="Bound">P</a> <a id="1619" href="Relation.Unary.html#4338" class="Function Operator">⇒</a> <a id="1621" href="MonadicFragment.html#1260" class="Bound">M</a> <a id="1623" href="MonadicFragment.html#1531" class="Bound">V</a> <a id="1625" href="MonadicFragment.html#1558" class="Bound">Γ</a> <a id="1627" href="MonadicFragment.html#1576" class="Bound">Q</a> <a id="1629" href="Relation.Unary.html#3359" class="Function">]</a> <a id="1631" class="Symbol">→</a> <a id="1633" href="MonadicFragment.html#1260" class="Bound">M</a> <a id="1635" href="MonadicFragment.html#1531" class="Bound">V</a> <a id="1637" href="MonadicFragment.html#1558" class="Bound">Γ</a> <a id="1639" href="MonadicFragment.html#1576" class="Bound">Q</a> <a id="1641" href="MonadicFragment.html#1597" class="Bound">Σ</a>
    <a id="1647" href="MonadicFragment.html#1647" class="Bound">x</a> <a id="1649" href="MonadicFragment.html#1515" class="Function Operator">&gt;&gt;=</a> <a id="1653" href="MonadicFragment.html#1653" class="Bound">f</a> <a id="1655" class="Symbol">=</a> <a id="1657" href="Structure.Monad.html#575" class="Field">RawMonad.bind</a> <a id="1671" href="MonadicFragment.html#1292" class="Field">isMonadic</a> <a id="1681" href="MonadicFragment.html#1653" class="Bound">f</a> <a id="1683" href="MonadicFragment.html#1647" class="Bound">x</a>

  <a id="1688" class="Keyword">open</a> <a id="1693" href="MonadicFragment.html#1251" class="Module">Monadic</a> <a id="1701" class="Symbol">⦃...⦄</a> <a id="1707" class="Keyword">public</a>

  <a id="1717" class="Keyword">open</a> <a id="1722" href="Box.html#172" class="Module">Rel₂</a> <a id="1727" class="Symbol">⦃...⦄</a>

  <a id="1736" class="Keyword">record</a> <a id="Itf.IsWeakenable"></a><a id="1743" href="MonadicFragment.html#1743" class="Record">IsWeakenable</a> <a id="1756" class="Symbol">(</a><a id="1757" href="MonadicFragment.html#1757" class="Bound">V</a> <a id="1759" class="Symbol">:</a> <a id="1761" href="Canon.html#826" class="Record">Values</a> <a id="1768" href="MonadicFragment.html#96" class="Bound">Ix</a> <a id="1771" href="Signature.html#861" class="Generalizable">σ</a><a id="1772" class="Symbol">)</a> <a id="1774" class="Symbol">:</a> <a id="1776" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1780" class="Keyword">where</a> 
    <a id="1791" class="Keyword">field</a> <a id="Itf.IsWeakenable.isWk"></a><a id="1797" href="MonadicFragment.html#1797" class="Field">isWk</a> <a id="1802" class="Symbol">:</a> <a id="1804" class="Symbol">∀</a> <a id="1806" class="Symbol">{</a><a id="1807" href="MonadicFragment.html#1807" class="Bound">t</a><a id="1808" class="Symbol">}</a> <a id="1810" class="Symbol">→</a> <a id="1812" class="Keyword">let</a> <a id="1816" class="Keyword">open</a> <a id="1821" href="Structure.Monad.html#1065" class="Module">Wk</a> <a id="1824" href="Box.html#248" class="Field">R</a> <a id="1826" class="Keyword">in</a> <a id="1829" href="Structure.Monad.html#1113">Weakenable</a> <a id="1840" class="Symbol">(</a><a id="1841" href="Signature.html#2146" class="Function">para</a> <a id="1846" class="Symbol">(</a><a id="1847" href="Canon.html#923" class="Field">out</a> <a id="1851" href="MonadicFragment.html#1757" class="Bound">V</a><a id="1852" class="Symbol">)</a> <a id="1854" href="MonadicFragment.html#1807" class="Bound">t</a><a id="1855" class="Symbol">)</a> 

    <a id="Itf.IsWeakenable.wk"></a><a id="1863" href="MonadicFragment.html#1863" class="Function">wk</a> <a id="1866" class="Symbol">:</a> <a id="1868" class="Symbol">∀</a> <a id="1870" class="Symbol">{</a><a id="1871" href="MonadicFragment.html#1871" class="Bound">i</a> <a id="1873" href="MonadicFragment.html#1873" class="Bound">i′</a><a id="1875" class="Symbol">}</a> <a id="1877" class="Symbol">→</a> <a id="1879" href="Box.html#248" class="Field">R</a> <a id="1881" href="MonadicFragment.html#1871" class="Bound">i</a> <a id="1883" href="MonadicFragment.html#1873" class="Bound">i′</a> <a id="1886" class="Symbol">→</a> <a id="1888" class="Symbol">∀</a> <a id="1890" class="Symbol">{</a><a id="1891" href="MonadicFragment.html#1891" class="Bound">t</a><a id="1892" class="Symbol">}</a> <a id="1894" class="Symbol">→</a> <a id="1896" href="Signature.html#2146" class="Function">para</a> <a id="1901" class="Symbol">(</a><a id="1902" href="Canon.html#923" class="Field">out</a> <a id="1906" href="MonadicFragment.html#1757" class="Bound">V</a><a id="1907" class="Symbol">)</a> <a id="1909" href="MonadicFragment.html#1891" class="Bound">t</a> <a id="1911" href="MonadicFragment.html#1871" class="Bound">i</a> <a id="1913" class="Symbol">→</a> <a id="1915" href="Signature.html#2146" class="Function">para</a> <a id="1920" class="Symbol">(</a><a id="1921" href="Canon.html#923" class="Field">out</a> <a id="1925" href="MonadicFragment.html#1757" class="Bound">V</a><a id="1926" class="Symbol">)</a> <a id="1928" href="MonadicFragment.html#1891" class="Bound">t</a> <a id="1930" href="MonadicFragment.html#1873" class="Bound">i′</a>
    <a id="1937" href="MonadicFragment.html#1863" class="Function">wk</a> <a id="1940" href="MonadicFragment.html#1940" class="Bound">sub</a> <a id="1944" class="Symbol">{</a><a id="1945" href="MonadicFragment.html#1945" class="Bound">t</a><a id="1946" class="Symbol">}</a> <a id="1948" href="MonadicFragment.html#1948" class="Bound">px</a> <a id="1951" class="Symbol">=</a> <a id="1953" href="Structure.Monad.html#1180" class="Field">Wk.Weakenable.wk</a> <a id="1970" class="Symbol">(</a><a id="1971" href="MonadicFragment.html#1797" class="Field">isWk</a> <a id="1976" class="Symbol">{</a><a id="1977" href="MonadicFragment.html#1945" class="Bound">t</a><a id="1978" class="Symbol">})</a> <a id="1981" href="MonadicFragment.html#1940" class="Bound">sub</a> <a id="1985" href="MonadicFragment.html#1948" class="Bound">px</a>

  <a id="1991" class="Keyword">open</a> <a id="1996" href="MonadicFragment.html#1743" class="Module">IsWeakenable</a> <a id="2009" class="Symbol">⦃...⦄</a> <a id="2015" class="Keyword">public</a> 

  <a id="2026" class="Keyword">record</a> <a id="Itf.IsStrong"></a><a id="2033" href="MonadicFragment.html#2033" class="Record">IsStrong</a> <a id="2042" class="Symbol">{</a><a id="2043" href="MonadicFragment.html#2043" class="Bound">M</a> <a id="2045" class="Symbol">:</a> <a id="2047" href="MonadicFragment.html#768" class="Function">Eff</a><a id="2050" class="Symbol">}</a> <a id="2052" class="Symbol">(</a><a id="2053" href="MonadicFragment.html#2053" class="Bound">mon</a> <a id="2057" class="Symbol">:</a> <a id="2059" href="MonadicFragment.html#1251" class="Record">Monadic</a> <a id="2067" href="MonadicFragment.html#2043" class="Bound">M</a><a id="2068" class="Symbol">)</a> <a id="2070" class="Symbol">:</a> <a id="2072" href="Agda.Primitive.html#326" class="Primitive">Set₁</a> <a id="2077" class="Keyword">where</a>
    <a id="2087" class="Keyword">field</a> <a id="Itf.IsStrong.isStr"></a><a id="2093" href="MonadicFragment.html#2093" class="Field">isStr</a> <a id="2099" class="Symbol">:</a> <a id="2101" class="Symbol">∀</a> <a id="2103" class="Symbol">{</a><a id="2104" href="MonadicFragment.html#2104" class="Bound">σ</a><a id="2105" class="Symbol">}</a> <a id="2107" class="Symbol">{</a><a id="2108" href="MonadicFragment.html#2108" class="Bound">V</a> <a id="2110" class="Symbol">:</a> <a id="2112" href="Signature.html#1143" class="Datatype">μ</a> <a id="2114" href="MonadicFragment.html#2104" class="Bound">σ</a> <a id="2116" class="Symbol">→</a> <a id="2118" href="MonadicFragment.html#96" class="Bound">Ix</a> <a id="2121" class="Symbol">(</a><a id="2122" href="Signature.html#1143" class="Datatype">μ</a> <a id="2124" href="MonadicFragment.html#2104" class="Bound">σ</a><a id="2125" class="Symbol">)</a> <a id="2127" class="Symbol">→</a> <a id="2129" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="2132" class="Symbol">}</a> <a id="2134" class="Symbol">{</a><a id="2135" href="MonadicFragment.html#2135" class="Bound">Γ</a> <a id="2137" class="Symbol">:</a> <a id="2139" href="Core.html#379" class="Function">Ctx</a> <a id="2143" class="Symbol">(</a><a id="2144" href="Signature.html#1143" class="Datatype">μ</a> <a id="2146" href="MonadicFragment.html#2104" class="Bound">σ</a><a id="2147" class="Symbol">)}</a> <a id="2150" class="Symbol">→</a> <a id="2152" class="Keyword">let</a> <a id="2156" class="Keyword">open</a> <a id="2161" href="Structure.Monad.html#1065" class="Module">Wk</a> <a id="2164" href="Box.html#248" class="Field">R</a> <a id="2166" class="Keyword">in</a> <a id="2169" href="Structure.Monad.html#1226">Strength</a> <a id="2178" class="Symbol">(</a><a id="2179" href="MonadicFragment.html#1292" class="Field">Monadic.isMonadic</a> <a id="2197" href="MonadicFragment.html#2053" class="Bound">mon</a> <a id="2201" class="Symbol">{</a><a id="2202" href="MonadicFragment.html#2104" class="Bound">σ</a><a id="2203" class="Symbol">}</a> <a id="2205" class="Symbol">{</a><a id="2206" href="MonadicFragment.html#2108" class="Bound">V</a><a id="2207" class="Symbol">}</a> <a id="2209" class="Symbol">{</a><a id="2210" href="MonadicFragment.html#2135" class="Bound">Γ</a><a id="2211" class="Symbol">})</a> 

    <a id="Itf.IsStrong._^_"></a><a id="2220" href="MonadicFragment.html#2220" class="Function Operator">_^_</a> <a id="2224" class="Symbol">:</a> <a id="2226" class="Symbol">∀</a> <a id="2228" class="Symbol">{</a><a id="2229" href="MonadicFragment.html#2229" class="Bound">V</a> <a id="2231" class="Symbol">:</a> <a id="2233" href="Canon.html#826" class="Record">Values</a> <a id="2240" href="MonadicFragment.html#96" class="Bound">Ix</a> <a id="2243" href="Signature.html#861" class="Generalizable">σ</a><a id="2244" class="Symbol">}</a> <a id="2246" class="Symbol">{</a><a id="2247" href="MonadicFragment.html#2247" class="Bound">Γ</a> <a id="2249" href="MonadicFragment.html#2249" class="Bound">P</a><a id="2250" class="Symbol">}</a> <a id="2252" class="Symbol">→</a> <a id="2254" class="Symbol">⦃</a> <a id="2256" href="MonadicFragment.html#1743" class="Record">IsWeakenable</a> <a id="2269" href="MonadicFragment.html#2229" class="Bound">V</a> <a id="2271" class="Symbol">⦄</a> <a id="2273" class="Symbol">→</a> <a id="2275" class="Symbol">∀</a> <a id="2277" class="Symbol">{</a><a id="2278" href="MonadicFragment.html#2278" class="Bound">t</a><a id="2279" class="Symbol">}</a> <a id="2281" class="Symbol">→</a>  <a id="2284" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="2287" href="MonadicFragment.html#2043" class="Bound">M</a> <a id="2289" class="Symbol">(</a><a id="2290" href="Signature.html#2146" class="Function">para</a> <a id="2295" class="Symbol">(</a><a id="2296" href="Canon.html#923" class="Field">out</a> <a id="2300" href="MonadicFragment.html#2229" class="Bound">V</a><a id="2301" class="Symbol">))</a> <a id="2304" href="MonadicFragment.html#2247" class="Bound">Γ</a> <a id="2306" href="MonadicFragment.html#2249" class="Bound">P</a> <a id="2308" href="Relation.Unary.html#4338" class="Function Operator">⇒</a> <a id="2310" href="Signature.html#2146" class="Function">para</a> <a id="2315" class="Symbol">(</a><a id="2316" href="Canon.html#923" class="Field">out</a> <a id="2320" href="MonadicFragment.html#2229" class="Bound">V</a><a id="2321" class="Symbol">)</a> <a id="2323" href="MonadicFragment.html#2278" class="Bound">t</a> <a id="2325" href="Relation.Unary.html#4338" class="Function Operator">⇒</a> <a id="2327" href="MonadicFragment.html#2043" class="Bound">M</a> <a id="2329" class="Symbol">(</a><a id="2330" href="Signature.html#2146" class="Function">para</a> <a id="2335" class="Symbol">(</a><a id="2336" href="Canon.html#923" class="Field">out</a> <a id="2340" href="MonadicFragment.html#2229" class="Bound">V</a><a id="2341" class="Symbol">))</a> <a id="2344" href="MonadicFragment.html#2247" class="Bound">Γ</a> <a id="2346" class="Symbol">(</a><a id="2347" href="MonadicFragment.html#2249" class="Bound">P</a> <a id="2349" href="Relation.Unary.html#4503" class="Function Operator">∩</a> <a id="2351" class="Symbol">(</a><a id="2352" href="Signature.html#2146" class="Function">para</a> <a id="2357" class="Symbol">(</a><a id="2358" href="Canon.html#923" class="Field">out</a> <a id="2362" href="MonadicFragment.html#2229" class="Bound">V</a><a id="2363" class="Symbol">)</a> <a id="2365" href="MonadicFragment.html#2278" class="Bound">t</a><a id="2366" class="Symbol">))</a> <a id="2369" href="Relation.Unary.html#3359" class="Function">]</a> 
    <a id="2376" href="MonadicFragment.html#2220" class="Function Operator">_^_</a> <a id="2380" class="Symbol">⦃</a> <a id="2382" href="MonadicFragment.html#2382" class="Bound">w</a> <a id="2384" class="Symbol">⦄</a> <a id="2386" class="Symbol">{</a><a id="2387" href="MonadicFragment.html#2387" class="Bound">t</a><a id="2388" class="Symbol">}</a> <a id="2390" href="MonadicFragment.html#2390" class="Bound">x</a> <a id="2392" href="MonadicFragment.html#2392" class="Bound">y</a> <a id="2394" class="Symbol">=</a> <a id="2396" href="Structure.Monad.html#1336" class="Field Operator">Wk.Strength._^_</a> <a id="2412" href="MonadicFragment.html#2093" class="Field">isStr</a> <a id="2418" class="Symbol">⦃</a> <a id="2420" href="MonadicFragment.html#1797" class="Field">IsWeakenable.isWk</a> <a id="2438" href="MonadicFragment.html#2382" class="Bound">w</a> <a id="2440" class="Symbol">{</a><a id="2441" href="MonadicFragment.html#2387" class="Bound">t</a><a id="2442" class="Symbol">}</a> <a id="2444" class="Symbol">⦄</a> <a id="2446" href="MonadicFragment.html#2390" class="Bound">x</a> <a id="2448" href="MonadicFragment.html#2392" class="Bound">y</a>

<a id="2451" class="Keyword">module</a> <a id="2458" href="MonadicFragment.html#2458" class="Module">_</a> <a id="2460" class="Keyword">where</a>

  <a id="2469" class="Keyword">open</a> <a id="2474" href="Canon.html#1228" class="Module">Canon.ICanon</a>
  <a id="2489" class="Keyword">open</a> <a id="2494" href="Box.html#172" class="Module">Rel₂</a> 

  <a id="2503" href="MonadicFragment.html#2503" class="Function">Expressions</a> <a id="2515" class="Symbol">:</a> <a id="2517" href="Signature.html#741" class="Record">Signature</a> <a id="2527" class="Symbol">_</a> <a id="2529" class="Symbol">→</a> <a id="2531" href="Agda.Primitive.html#326" class="Primitive">Set₁</a>
  <a id="2538" href="MonadicFragment.html#2503" class="Function">Expressions</a> <a id="2550" href="MonadicFragment.html#2550" class="Bound">σ</a> <a id="2552" class="Symbol">=</a> <a id="2554" class="Symbol">∀</a> <a id="2556" class="Symbol">{</a><a id="2557" href="MonadicFragment.html#2557" class="Bound">σ′</a><a id="2559" class="Symbol">}</a> <a id="2561" class="Symbol">→</a> <a id="2563" class="Symbol">⦃</a> <a id="2565" href="MonadicFragment.html#2550" class="Bound">σ</a> <a id="2567" href="Signature.html#4467" class="Record Operator">≼</a> <a id="2569" href="MonadicFragment.html#2557" class="Bound">σ′</a> <a id="2572" class="Symbol">⦄</a> <a id="2574" class="Symbol">→</a> <a id="2576" href="Signature.html#2610" class="Record">ISignature</a> <a id="2587" class="Symbol">_</a> <a id="2589" class="Symbol">(</a><a id="2590" href="Core.html#379" class="Function">Ctx</a> <a id="2594" class="Symbol">(</a><a id="2595" href="Signature.html#1143" class="Datatype">μ</a> <a id="2597" href="MonadicFragment.html#2557" class="Bound">σ′</a><a id="2599" class="Symbol">)</a> <a id="2601" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="2603" href="Signature.html#1143" class="Datatype">μ</a> <a id="2605" href="MonadicFragment.html#2557" class="Bound">σ′</a><a id="2607" class="Symbol">)</a> <a id="2609" class="Symbol">(</a><a id="2610" href="Core.html#379" class="Function">Ctx</a> <a id="2614" class="Symbol">(</a><a id="2615" href="Signature.html#1143" class="Datatype">μ</a> <a id="2617" href="MonadicFragment.html#2557" class="Bound">σ′</a><a id="2619" class="Symbol">)</a> <a id="2621" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="2623" href="Signature.html#1143" class="Datatype">μ</a> <a id="2625" href="MonadicFragment.html#2557" class="Bound">σ′</a><a id="2627" class="Symbol">)</a>

  <a id="2632" class="Keyword">record</a> <a id="2639" href="MonadicFragment.html#2639" class="Record">MonadicFragment</a> <a id="2655" class="Symbol">(</a><a id="2656" href="MonadicFragment.html#2656" class="Bound">M</a> <a id="2658" class="Symbol">:</a> <a id="2660" href="MonadicFragment.html#768" class="Function">Eff</a><a id="2663" class="Symbol">)</a> <a id="2665" class="Symbol">(</a><a id="2666" href="MonadicFragment.html#2666" class="Bound">c</a> <a id="2668" class="Symbol">:</a> <a id="2670" href="Canon.html#1228" class="Record">ICanon</a> <a id="2677" href="MonadicFragment.html#96" class="Bound">Ix</a><a id="2679" class="Symbol">)</a> <a id="2681" class="Symbol">:</a> <a id="2683" href="Agda.Primitive.html#326" class="Primitive">Set₁</a> <a id="2688" class="Keyword">where</a>
    <a id="2698" class="Keyword">field</a>
      <a id="2710" href="MonadicFragment.html#2710" class="Field">exprᵐ</a>   <a id="2718" class="Symbol">:</a> <a id="2720" href="Signature.html#2610" class="Record">ISignature</a> <a id="2731" class="Symbol">_</a> <a id="2733" class="Symbol">(</a><a id="2734" href="Core.html#379" class="Function">Ctx</a> <a id="2738" class="Symbol">(</a><a id="2739" href="Signature.html#1143" class="Datatype">μ</a> <a id="2741" class="Symbol">(</a><a id="2742" href="Canon.html#1298" class="Field">ity</a> <a id="2746" href="MonadicFragment.html#2666" class="Bound">c</a><a id="2747" class="Symbol">))</a> <a id="2750" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="2752" href="Signature.html#1143" class="Datatype">μ</a> <a id="2754" class="Symbol">(</a><a id="2755" href="Canon.html#1298" class="Field">ity</a> <a id="2759" href="MonadicFragment.html#2666" class="Bound">c</a><a id="2760" class="Symbol">))</a> <a id="2763" class="Symbol">(</a><a id="2764" href="Core.html#379" class="Function">Ctx</a> <a id="2768" class="Symbol">(</a><a id="2769" href="Signature.html#1143" class="Datatype">μ</a> <a id="2771" class="Symbol">(</a><a id="2772" href="Canon.html#1298" class="Field">ity</a> <a id="2776" href="MonadicFragment.html#2666" class="Bound">c</a><a id="2777" class="Symbol">))</a> <a id="2780" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="2782" href="Signature.html#1143" class="Datatype">μ</a> <a id="2784" class="Symbol">(</a><a id="2785" href="Canon.html#1298" class="Field">ity</a> <a id="2789" href="MonadicFragment.html#2666" class="Bound">c</a><a id="2790" class="Symbol">))</a>
      <a id="2799" href="MonadicFragment.html#2799" class="Field">interpᵐ</a> <a id="2807" class="Symbol">:</a> <a id="2809" class="Keyword">let</a> <a id="2813" class="Keyword">open</a> <a id="2818" href="Structure.Monad.html#1065" class="Module">Wk</a> <a id="2821" class="Symbol">(</a><a id="2822" href="Box.html#248" class="Field">R</a> <a id="2824" class="Symbol">(</a><a id="2825" href="MonadicFragment.html#114" class="Bound">ix-rel</a> <a id="2832" class="Symbol">{</a><a id="2833" href="Signature.html#1143" class="Datatype">μ</a> <a id="2835" class="Symbol">(</a><a id="2836" href="Canon.html#1298" class="Field">ity</a> <a id="2840" href="MonadicFragment.html#2666" class="Bound">c</a><a id="2841" class="Symbol">)}))</a> <a id="2846" class="Keyword">in</a> <a id="2849" class="Symbol">⦃</a> <a id="2851" href="MonadicFragment.html#1743" class="Record">Itf.IsWeakenable</a> <a id="2868" class="Symbol">(</a><a id="2869" href="Canon.html#1328" class="Field">ival</a> <a id="2874" href="MonadicFragment.html#2666" class="Bound">c</a><a id="2875" class="Symbol">)</a> <a id="2877" class="Symbol">⦄</a> <a id="2879" class="Symbol">→</a> <a id="2881" href="Signature.html#3654" class="Record">IAlgebra</a> <a id="2890" href="MonadicFragment.html#2710" class="Field">exprᵐ</a> <a id="2896" class="Symbol">λ</a> <a id="2898" class="Symbol">(</a><a id="2899" href="MonadicFragment.html#2899" class="Bound">Γ</a> <a id="2901" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2903" href="MonadicFragment.html#2903" class="Bound">t</a><a id="2904" class="Symbol">)</a> <a id="2906" class="Symbol">→</a> <a id="2908" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="2911" href="MonadicFragment.html#2656" class="Bound">M</a> <a id="2913" class="Symbol">(</a><a id="2914" href="Signature.html#2146" class="Function">para</a> <a id="2919" class="Symbol">(</a><a id="2920" href="Canon.html#923" class="Field">out</a> <a id="2924" class="Symbol">(</a><a id="2925" href="Canon.html#1328" class="Field">ival</a> <a id="2930" href="MonadicFragment.html#2666" class="Bound">c</a><a id="2931" class="Symbol">)))</a> <a id="2935" href="MonadicFragment.html#2899" class="Bound">Γ</a> <a id="2937" class="Symbol">(</a><a id="2938" href="Signature.html#2146" class="Function">para</a> <a id="2943" class="Symbol">(</a><a id="2944" href="Canon.html#923" class="Field">out</a> <a id="2948" class="Symbol">(</a><a id="2949" href="Canon.html#1328" class="Field">ival</a> <a id="2954" href="MonadicFragment.html#2666" class="Bound">c</a><a id="2955" class="Symbol">))</a> <a id="2958" href="MonadicFragment.html#2903" class="Bound">t</a><a id="2959" class="Symbol">)</a> <a id="2961" href="Relation.Unary.html#3359" class="Function">]</a> 

  <a id="2967" class="Keyword">open</a> <a id="2972" href="MonadicFragment.html#2639" class="Module">MonadicFragment</a> <a id="2988" class="Keyword">public</a>

<a id="2996" class="Comment">{- Homogeneous and heterogeneous composition operators for monadic fragments 
   
   The implementations are again (virtually) identical, but the operations have 
   slightly different types 
-}</a> 
<a id="3192" class="Keyword">module</a> <a id="3199" href="MonadicFragment.html#3199" class="Module">_</a> <a id="3201" class="Symbol">{</a><a id="3202" href="MonadicFragment.html#3202" class="Bound">M</a> <a id="3204" class="Symbol">:</a> <a id="3206" href="MonadicFragment.html#768" class="Function">Eff</a><a id="3209" class="Symbol">}</a> <a id="3211" class="Keyword">where</a> 

  <a id="3221" class="Keyword">open</a> <a id="3226" href="MonadicFragment.html#2639" class="Module">MonadicFragment</a>
  <a id="3244" class="Keyword">open</a> <a id="3249" href="Box.html#603" class="Module">Necessary</a>
  <a id="3261" class="Keyword">open</a> <a id="3266" href="Box.html#690" class="Module">□</a>

  <a id="3271" href="MonadicFragment.html#3271" class="Function">fcompose-homᵐ</a> <a id="3285" class="Symbol">:</a> <a id="3287" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="3290" href="MonadicFragment.html#2639" class="Record">MonadicFragment</a> <a id="3306" href="MonadicFragment.html#3202" class="Bound">M</a> <a id="3308" href="Relation.Unary.html#4338" class="Function Operator">⇒</a> <a id="3310" href="MonadicFragment.html#2639" class="Record">MonadicFragment</a> <a id="3326" href="MonadicFragment.html#3202" class="Bound">M</a> <a id="3328" href="Relation.Unary.html#4338" class="Function Operator">⇒</a> <a id="3330" href="MonadicFragment.html#2639" class="Record">MonadicFragment</a> <a id="3346" href="MonadicFragment.html#3202" class="Bound">M</a> <a id="3348" href="Relation.Unary.html#3359" class="Function">]</a>   
  <a id="3355" href="MonadicFragment.html#2710" class="Field">exprᵐ</a>   <a id="3363" class="Symbol">(</a><a id="3364" href="MonadicFragment.html#3271" class="Function">fcompose-homᵐ</a> <a id="3378" href="MonadicFragment.html#3378" class="Bound">φ₁</a> <a id="3381" href="MonadicFragment.html#3381" class="Bound">φ₂</a><a id="3383" class="Symbol">)</a> <a id="3385" class="Symbol">=</a> <a id="3387" href="MonadicFragment.html#2710" class="Field">exprᵐ</a>   <a id="3395" href="MonadicFragment.html#3378" class="Bound">φ₁</a> <a id="3398" href="Signature.html#3246" class="Function Operator">:++:</a> <a id="3403" href="MonadicFragment.html#2710" class="Field">exprᵐ</a> <a id="3409" href="MonadicFragment.html#3381" class="Bound">φ₂</a>
  <a id="3414" href="MonadicFragment.html#2799" class="Field">interpᵐ</a> <a id="3422" class="Symbol">(</a><a id="3423" href="MonadicFragment.html#3271" class="Function">fcompose-homᵐ</a> <a id="3437" href="MonadicFragment.html#3437" class="Bound">φ₁</a> <a id="3440" href="MonadicFragment.html#3440" class="Bound">φ₂</a><a id="3442" class="Symbol">)</a> <a id="3444" class="Symbol">=</a> <a id="3446" href="MonadicFragment.html#2799" class="Field">interpᵐ</a> <a id="3454" href="MonadicFragment.html#3437" class="Bound">φ₁</a> <a id="3457" href="Signature.html#4071" class="Function Operator">:⊕:</a> <a id="3461" href="MonadicFragment.html#2799" class="Field">interpᵐ</a> <a id="3469" href="MonadicFragment.html#3440" class="Bound">φ₂</a>  

  <a id="3477" href="MonadicFragment.html#3477" class="Function">fcomposeᵐ</a> <a id="3487" class="Symbol">:</a> <a id="3489" class="Symbol">∀</a> <a id="3491" class="Symbol">{</a><a id="3492" href="MonadicFragment.html#3492" class="Bound">c₁</a> <a id="3495" href="MonadicFragment.html#3495" class="Bound">c₂</a> <a id="3498" href="MonadicFragment.html#3498" class="Bound">c</a><a id="3499" class="Symbol">}</a> <a id="3501" class="Symbol">→</a> <a id="3503" href="MonadicFragment.html#3492" class="Bound">c₁</a> <a id="3506" href="Canon.html#6092" class="Record Operator">∙</a> <a id="3508" href="MonadicFragment.html#3495" class="Bound">c₂</a> <a id="3511" href="Canon.html#6092" class="Record Operator">≣</a> <a id="3513" href="MonadicFragment.html#3498" class="Bound">c</a> <a id="3515" class="Symbol">→</a> <a id="3517" href="Box.html#690" class="Record">□</a> <a id="3519" class="Symbol">(</a><a id="3520" href="MonadicFragment.html#2639" class="Record">MonadicFragment</a> <a id="3536" href="MonadicFragment.html#3202" class="Bound">M</a><a id="3537" class="Symbol">)</a> <a id="3539" href="MonadicFragment.html#3492" class="Bound">c₁</a> <a id="3542" class="Symbol">→</a> <a id="3544" href="Box.html#690" class="Record">□</a> <a id="3546" class="Symbol">(</a><a id="3547" href="MonadicFragment.html#2639" class="Record">MonadicFragment</a> <a id="3563" href="MonadicFragment.html#3202" class="Bound">M</a><a id="3564" class="Symbol">)</a> <a id="3566" href="MonadicFragment.html#3495" class="Bound">c₂</a> <a id="3569" class="Symbol">→</a> <a id="3571" href="Box.html#690" class="Record">□</a> <a id="3573" class="Symbol">(</a><a id="3574" href="MonadicFragment.html#2639" class="Record">MonadicFragment</a> <a id="3590" href="MonadicFragment.html#3202" class="Bound">M</a><a id="3591" class="Symbol">)</a> <a id="3593" href="MonadicFragment.html#3498" class="Bound">c</a>
  <a id="3597" href="MonadicFragment.html#3477" class="Function">fcomposeᵐ</a> <a id="3607" href="MonadicFragment.html#3607" class="Bound">sep</a> <a id="3611" href="MonadicFragment.html#3611" class="Bound">φ₁</a> <a id="3614" href="MonadicFragment.html#3614" class="Bound">φ₂</a> <a id="3617" class="Symbol">=</a> <a id="3619" href="Box.html#1351" class="Function">□-distr-⇒</a> <a id="3629" class="Symbol">(</a><a id="3630" href="Box.html#1256" class="Function">□-lift</a> <a id="3637" href="MonadicFragment.html#3271" class="Function">fcompose-homᵐ</a> <a id="3651" class="Symbol">(</a><a id="3652" href="Box.html#759" class="Field">future</a> <a id="3659" class="Symbol">(</a><a id="3660" href="Box.html#995" class="Function">duplicate</a> <a id="3670" href="MonadicFragment.html#3611" class="Bound">φ₁</a><a id="3672" class="Symbol">)</a> <a id="3674" class="Symbol">(</a><a id="3675" href="Canon.html#9601" class="Function">∙-⊑₁</a> <a id="3680" href="MonadicFragment.html#3607" class="Bound">sep</a><a id="3683" class="Symbol">)))</a>
                                                        <a id="3743" class="Symbol">(</a><a id="3744" href="Box.html#759" class="Field">future</a> <a id="3751" class="Symbol">(</a><a id="3752" href="Box.html#995" class="Function">duplicate</a> <a id="3762" href="MonadicFragment.html#3614" class="Bound">φ₂</a><a id="3764" class="Symbol">)</a> <a id="3766" class="Symbol">(</a><a id="3767" href="Canon.html#9874" class="Function">∙-⊑₂</a> <a id="3772" href="MonadicFragment.html#3607" class="Bound">sep</a><a id="3775" class="Symbol">))</a>

  <a id="3781" class="Keyword">infixr</a> <a id="3788" class="Number">5</a> <a id="3790" href="MonadicFragment.html#3477" class="Function">fcomposeᵐ</a>
  <a id="3802" class="Keyword">syntax</a> <a id="3809" href="MonadicFragment.html#3477" class="Function">fcomposeᵐ</a> <a id="3819" class="Bound">sep</a> <a id="3823" class="Bound">φ₁</a> <a id="3826" class="Bound">φ₂</a> <a id="3829" class="Symbol">=</a> <a id="3831" class="Bound">φ₁</a> <a id="3834" class="Function">⊙⟨</a> <a id="3837" class="Bound">sep</a> <a id="3841" class="Function">⟩ᵐ</a> <a id="3844" class="Bound">φ₂</a>


<a id="3849" class="Comment">{- Extract executable interpᵐreters from extensible monadic fragments -}</a> 
<a id="3923" class="Keyword">module</a> <a id="3930" href="MonadicFragment.html#3930" class="Module">_</a> <a id="3932" class="Symbol">{</a><a id="3933" href="MonadicFragment.html#3933" class="Bound">M</a> <a id="3935" class="Symbol">:</a> <a id="3937" href="MonadicFragment.html#768" class="Function">Eff</a><a id="3940" class="Symbol">}</a> <a id="3942" class="Keyword">where</a> 

  <a id="3952" class="Keyword">open</a> <a id="3957" href="Box.html#603" class="Module">Necessary</a>
  <a id="3969" class="Keyword">open</a> <a id="3974" href="MonadicFragment.html#2639" class="Module">MonadicFragment</a>
  <a id="3992" class="Keyword">open</a> <a id="3997" href="Canon.html#1228" class="Module">ICanon</a>
  <a id="4006" class="Keyword">open</a> <a id="4011" href="Box.html#690" class="Module">□</a>

  <a id="4016" href="MonadicFragment.html#4016" class="Function">closeᵐ</a> <a id="4023" class="Symbol">:</a> <a id="4025" class="Symbol">∀</a> <a id="4027" class="Symbol">{</a><a id="4028" href="MonadicFragment.html#4028" class="Bound">c</a><a id="4029" class="Symbol">}</a> <a id="4031" class="Symbol">→</a> <a id="4033" class="Symbol">⦃</a> <a id="4035" href="MonadicFragment.html#1743" class="Record">Itf.IsWeakenable</a> <a id="4052" class="Symbol">(</a><a id="4053" href="Canon.html#1328" class="Field">ival</a> <a id="4058" href="MonadicFragment.html#4028" class="Bound">c</a><a id="4059" class="Symbol">)</a> <a id="4061" class="Symbol">⦄</a> <a id="4063" class="Symbol">→</a> <a id="4065" href="Box.html#690" class="Record">□</a> <a id="4067" class="Symbol">(</a><a id="4068" href="MonadicFragment.html#2639" class="Record">MonadicFragment</a> <a id="4084" href="MonadicFragment.html#3933" class="Bound">M</a><a id="4085" class="Symbol">)</a> <a id="4087" href="MonadicFragment.html#4028" class="Bound">c</a> <a id="4089" class="Symbol">→</a> <a id="4091" href="MonadicFragment.html#2639" class="Record">MonadicFragment</a> <a id="4107" href="MonadicFragment.html#3933" class="Bound">M</a> <a id="4109" href="MonadicFragment.html#4028" class="Bound">c</a> 
  <a id="4114" href="MonadicFragment.html#2710" class="Field">exprᵐ</a>   <a id="4122" class="Symbol">(</a><a id="4123" href="MonadicFragment.html#4016" class="Function">closeᵐ</a> <a id="4130" class="Symbol">{_}</a> <a id="4134" class="Symbol">⦃</a> <a id="4136" href="MonadicFragment.html#4136" class="Bound">w</a> <a id="4138" class="Symbol">⦄</a> <a id="4140" href="MonadicFragment.html#4140" class="Bound">x</a><a id="4141" class="Symbol">)</a> <a id="4143" class="Symbol">=</a> <a id="4145" href="MonadicFragment.html#2710" class="Field">exprᵐ</a> <a id="4151" class="Symbol">(</a><a id="4152" href="Box.html#759" class="Field">future</a> <a id="4159" href="MonadicFragment.html#4140" class="Bound">x</a> <a id="4161" href="Canon.html#4020" class="Function">⊑-refl</a><a id="4167" class="Symbol">)</a>
  <a id="4171" href="MonadicFragment.html#2799" class="Field">interpᵐ</a> <a id="4179" class="Symbol">(</a><a id="4180" href="MonadicFragment.html#4016" class="Function">closeᵐ</a> <a id="4187" class="Symbol">{_}</a> <a id="4191" class="Symbol">⦃</a> <a id="4193" href="MonadicFragment.html#4193" class="Bound">w</a> <a id="4195" class="Symbol">⦄</a> <a id="4197" href="MonadicFragment.html#4197" class="Bound">x</a><a id="4198" class="Symbol">)</a> <a id="4200" class="Symbol">=</a> <a id="4202" href="MonadicFragment.html#2799" class="Field">interpᵐ</a> <a id="4210" class="Symbol">(</a><a id="4211" href="Box.html#759" class="Field">future</a> <a id="4218" href="MonadicFragment.html#4197" class="Bound">x</a> <a id="4220" href="Canon.html#4020" class="Function">⊑-refl</a><a id="4226" class="Symbol">)</a> <a id="4228" class="Symbol">⦃</a> <a id="4230" href="MonadicFragment.html#4193" class="Bound">w</a> <a id="4232" class="Symbol">⦄</a>

  <a id="4237" class="Keyword">open</a> <a id="4242" href="Canon.html#1228" class="Module">ICanon</a>
  <a id="4251" class="Keyword">open</a> <a id="4256" href="MonadicFragment.html#2639" class="Module">MonadicFragment</a>

  <a id="4275" class="Keyword">module</a> <a id="4282" href="MonadicFragment.html#4282" class="Module">_</a> <a id="4284" class="Symbol">{</a><a id="4285" href="MonadicFragment.html#4285" class="Bound">c</a> <a id="4287" class="Symbol">:</a> <a id="4289" href="Canon.html#1228" class="Record">ICanon</a> <a id="4296" href="MonadicFragment.html#96" class="Bound">Ix</a><a id="4298" class="Symbol">}</a> <a id="4300" class="Symbol">⦃</a> <a id="4302" href="MonadicFragment.html#4302" class="Bound">_</a> <a id="4304" class="Symbol">:</a> <a id="4306" href="MonadicFragment.html#1743" class="Record">Itf.IsWeakenable</a> <a id="4323" class="Symbol">(</a><a id="4324" href="Canon.html#1328" class="Field">ival</a> <a id="4329" href="MonadicFragment.html#4285" class="Bound">c</a><a id="4330" class="Symbol">)</a> <a id="4332" class="Symbol">⦄</a> <a id="4334" class="Keyword">where</a> 

    <a id="4346" href="MonadicFragment.html#4346" class="Function">extractInterpᵐ</a> <a id="4361" class="Symbol">:</a> <a id="4363" class="Symbol">(</a><a id="4364" href="MonadicFragment.html#4364" class="Bound">φ</a> <a id="4366" class="Symbol">:</a> <a id="4368" href="MonadicFragment.html#2639" class="Record">MonadicFragment</a> <a id="4384" href="MonadicFragment.html#3933" class="Bound">M</a> <a id="4386" href="MonadicFragment.html#4285" class="Bound">c</a><a id="4387" class="Symbol">)</a> <a id="4389" class="Symbol">→</a> <a id="4391" class="Symbol">∀</a> <a id="4393" class="Symbol">{</a><a id="4394" href="MonadicFragment.html#4394" class="Bound">Γ</a> <a id="4396" href="MonadicFragment.html#4396" class="Bound">t</a><a id="4397" class="Symbol">}</a> <a id="4399" class="Symbol">→</a> <a id="4401" href="Signature.html#3134" class="Datatype">μᴵ</a> <a id="4404" class="Symbol">(</a><a id="4405" href="MonadicFragment.html#2710" class="Field">exprᵐ</a> <a id="4411" href="MonadicFragment.html#4364" class="Bound">φ</a><a id="4412" class="Symbol">)</a> <a id="4414" class="Symbol">(</a><a id="4415" href="MonadicFragment.html#4394" class="Bound">Γ</a> <a id="4417" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4419" href="MonadicFragment.html#4396" class="Bound">t</a><a id="4420" class="Symbol">)</a> <a id="4422" class="Symbol">→</a> <a id="4424" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="4427" href="MonadicFragment.html#3933" class="Bound">M</a> <a id="4429" class="Symbol">(</a><a id="4430" href="Signature.html#2146" class="Function">para</a> <a id="4435" class="Symbol">(</a><a id="4436" href="Canon.html#923" class="Field">out</a> <a id="4440" class="Symbol">(</a><a id="4441" href="Canon.html#1328" class="Field">ival</a> <a id="4446" href="MonadicFragment.html#4285" class="Bound">c</a><a id="4447" class="Symbol">)))</a> <a id="4451" href="MonadicFragment.html#4394" class="Bound">Γ</a> <a id="4453" class="Symbol">(</a><a id="4454" href="Signature.html#2146" class="Function">para</a> <a id="4459" class="Symbol">(</a><a id="4460" href="Canon.html#923" class="Field">out</a> <a id="4464" class="Symbol">(</a><a id="4465" href="Canon.html#1328" class="Field">ival</a> <a id="4470" href="MonadicFragment.html#4285" class="Bound">c</a><a id="4471" class="Symbol">))</a> <a id="4474" href="MonadicFragment.html#4396" class="Bound">t</a><a id="4475" class="Symbol">)</a> <a id="4477" href="Relation.Unary.html#3359" class="Function">]</a> 
    <a id="4484" href="MonadicFragment.html#4346" class="Function">extractInterpᵐ</a> <a id="4499" href="MonadicFragment.html#4499" class="Bound">φ</a> <a id="4501" class="Symbol">=</a> <a id="4503" href="Signature.html#3929" class="Function">foldᴵ</a> <a id="4509" class="Symbol">(</a><a id="4510" href="MonadicFragment.html#2799" class="Field">interpᵐ</a> <a id="4518" href="MonadicFragment.html#4499" class="Bound">φ</a><a id="4519" class="Symbol">)</a>

  <a id="4524" class="Keyword">open</a> <a id="4529" href="Canon.html#1228" class="Module">ICanon</a>
  <a id="4538" class="Keyword">open</a> <a id="4543" href="MonadicFragment.html#2639" class="Module">MonadicFragment</a>


  <a id="4563" class="Keyword">module</a> <a id="4570" href="MonadicFragment.html#4570" class="Module">_</a> <a id="4572" class="Symbol">{</a><a id="4573" href="MonadicFragment.html#4573" class="Bound">c</a><a id="4574" class="Symbol">}</a> <a id="4576" class="Symbol">(</a><a id="4577" href="MonadicFragment.html#4577" class="Bound">φ</a> <a id="4579" class="Symbol">:</a> <a id="4581" href="Box.html#690" class="Record">□</a> <a id="4583" class="Symbol">(</a><a id="4584" href="MonadicFragment.html#2639" class="Record">MonadicFragment</a> <a id="4600" href="MonadicFragment.html#3933" class="Bound">M</a><a id="4601" class="Symbol">)</a> <a id="4603" href="MonadicFragment.html#4573" class="Bound">c</a><a id="4604" class="Symbol">)</a> <a id="4606" class="Symbol">{</a><a id="4607" href="MonadicFragment.html#4607" class="Bound">Γ</a><a id="4608" class="Symbol">}</a> <a id="4610" class="Symbol">{</a><a id="4611" href="MonadicFragment.html#4611" class="Bound">t</a> <a id="4613" class="Symbol">:</a> <a id="4615" href="Signature.html#1143" class="Datatype">μ</a> <a id="4617" class="Symbol">(</a><a id="4618" href="Canon.html#1298" class="Field">ity</a> <a id="4622" href="MonadicFragment.html#4573" class="Bound">c</a><a id="4623" class="Symbol">)}</a> <a id="4626" class="Keyword">where</a> 

    <a id="4638" href="MonadicFragment.html#4638" class="Function">closeFragment</a> <a id="4652" class="Symbol">:</a> <a id="4654" class="Symbol">⦃</a> <a id="4656" href="MonadicFragment.html#4656" class="Bound">_</a> <a id="4658" class="Symbol">:</a> <a id="4660" href="MonadicFragment.html#1743" class="Record">Itf.IsWeakenable</a> <a id="4677" class="Symbol">(</a><a id="4678" href="Canon.html#1328" class="Field">ival</a> <a id="4683" href="MonadicFragment.html#4573" class="Bound">c</a><a id="4684" class="Symbol">)</a> <a id="4686" class="Symbol">⦄</a> <a id="4688" class="Symbol">→</a> <a id="4690" href="Signature.html#3134" class="Datatype">μᴵ</a> <a id="4693" class="Symbol">(</a><a id="4694" href="MonadicFragment.html#2710" class="Field">exprᵐ</a> <a id="4700" class="Symbol">(</a><a id="4701" href="MonadicFragment.html#4016" class="Function">closeᵐ</a> <a id="4708" href="MonadicFragment.html#4577" class="Bound">φ</a><a id="4709" class="Symbol">))</a> <a id="4712" class="Symbol">(</a><a id="4713" href="MonadicFragment.html#4607" class="Bound">Γ</a> <a id="4715" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4717" href="MonadicFragment.html#4611" class="Bound">t</a><a id="4718" class="Symbol">)</a> <a id="4720" class="Symbol">→</a> <a id="4722" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="4725" href="MonadicFragment.html#3933" class="Bound">M</a> <a id="4727" class="Symbol">(</a><a id="4728" href="Signature.html#2146" class="Function">para</a> <a id="4733" class="Symbol">(</a><a id="4734" href="Canon.html#923" class="Field">out</a> <a id="4738" class="Symbol">(</a><a id="4739" href="Canon.html#1328" class="Field">ival</a> <a id="4744" href="MonadicFragment.html#4573" class="Bound">c</a><a id="4745" class="Symbol">)))</a> <a id="4749" href="MonadicFragment.html#4607" class="Bound">Γ</a> <a id="4751" class="Symbol">(</a><a id="4752" href="Signature.html#2146" class="Function">para</a> <a id="4757" class="Symbol">(</a><a id="4758" href="Canon.html#923" class="Field">out</a> <a id="4762" class="Symbol">(</a><a id="4763" href="Canon.html#1328" class="Field">ival</a> <a id="4768" href="MonadicFragment.html#4573" class="Bound">c</a><a id="4769" class="Symbol">))</a> <a id="4772" href="MonadicFragment.html#4611" class="Bound">t</a><a id="4773" class="Symbol">)</a> <a id="4775" href="Relation.Unary.html#3359" class="Function">]</a>
    <a id="4781" href="MonadicFragment.html#4638" class="Function">closeFragment</a> <a id="4795" class="Symbol">=</a> <a id="4797" href="Signature.html#3929" class="Function">foldᴵ</a> <a id="4803" class="Symbol">(</a><a id="4804" href="MonadicFragment.html#2799" class="Field">interpᵐ</a> <a id="4812" class="Symbol">(</a><a id="4813" href="MonadicFragment.html#4016" class="Function">closeᵐ</a> <a id="4820" href="MonadicFragment.html#4577" class="Bound">φ</a><a id="4821" class="Symbol">))</a>

<a id="4825" class="Comment">--</a>
<a id="4828" class="Comment">-- Fragment lifting</a>
<a id="4848" class="Comment">--</a>
<a id="4851" class="Keyword">module</a> <a id="4858" href="MonadicFragment.html#4858" class="Module">_</a> <a id="4860" class="Keyword">where</a>

  <a id="4869" class="Keyword">open</a> <a id="4874" href="Canon.html#1228" class="Module">Canon.ICanon</a>

  <a id="4890" class="Keyword">open</a> <a id="4895" href="Fragment.html#1390" class="Module">IFragment</a>
  <a id="4907" class="Keyword">open</a> <a id="4912" href="MonadicFragment.html#2639" class="Module">MonadicFragment</a>
  <a id="4930" class="Keyword">open</a> <a id="4935" href="MonadicFragment.html#1210" class="Module">Itf</a>
  
  <a id="4944" class="Keyword">module</a> <a id="4951" href="MonadicFragment.html#4951" class="Module">_</a>   <a id="4955" class="Symbol">(</a><a id="4956" href="MonadicFragment.html#4956" class="Bound">M</a> <a id="4958" class="Symbol">:</a> <a id="4960" href="MonadicFragment.html#768" class="Function">Eff</a><a id="4963" class="Symbol">)</a> <a id="4965" class="Symbol">⦃</a> <a id="4967" href="MonadicFragment.html#4967" class="Bound">mon</a> <a id="4971" class="Symbol">:</a> <a id="4973" href="MonadicFragment.html#1251" class="Record">Monadic</a> <a id="4981" href="MonadicFragment.html#4956" class="Bound">M</a> <a id="4983" class="Symbol">⦄</a> <a id="4985" class="Symbol">⦃</a> <a id="4987" href="MonadicFragment.html#4987" class="Bound">_</a>   <a id="4991" class="Symbol">:</a> <a id="4993" href="MonadicFragment.html#2033" class="Record">IsStrong</a> <a id="5002" href="MonadicFragment.html#4967" class="Bound">mon</a> <a id="5006" class="Symbol">⦄</a> <a id="5008" class="Keyword">where</a>

    <a id="5019" class="Keyword">open</a> <a id="5024" href="MonadicFragment.html#2033" class="Module">IsStrong</a> <a id="5033" class="Symbol">⦃...⦄</a>

    <a id="5044" href="MonadicFragment.html#5044" class="Function">sequence</a> <a id="5053" class="Symbol">:</a> <a id="5055" class="Symbol">∀</a> <a id="5057" class="Symbol">{</a><a id="5058" href="MonadicFragment.html#5058" class="Bound">c</a><a id="5059" class="Symbol">}</a> <a id="5061" class="Symbol">{</a><a id="5062" href="MonadicFragment.html#5062" class="Bound">Γ</a><a id="5063" class="Symbol">}</a> <a id="5065" class="Symbol">{</a><a id="5066" href="MonadicFragment.html#5066" class="Bound">xs</a> <a id="5069" class="Symbol">:</a> <a id="5071" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="5076" class="Symbol">(</a><a id="5077" href="Signature.html#1143" class="Datatype">μ</a> <a id="5079" class="Symbol">(</a><a id="5080" href="Canon.html#1298" class="Field">ity</a> <a id="5084" href="MonadicFragment.html#5058" class="Bound">c</a><a id="5085" class="Symbol">))}</a>
               <a id="5104" class="Symbol">→</a> <a id="5106" class="Symbol">⦃</a> <a id="5108" href="MonadicFragment.html#1743" class="Record">IsWeakenable</a> <a id="5121" class="Symbol">(</a><a id="5122" href="Canon.html#1328" class="Field">ival</a> <a id="5127" href="MonadicFragment.html#5058" class="Bound">c</a><a id="5128" class="Symbol">)</a> <a id="5130" class="Symbol">⦄</a>
               <a id="5147" class="Symbol">→</a> <a id="5149" href="Data.List.Relation.Unary.All.html#1397" class="Datatype">All</a> <a id="5153" class="Symbol">(λ</a> <a id="5156" class="Symbol">(</a><a id="5157" href="MonadicFragment.html#5157" class="Bound">Γ</a> <a id="5159" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5161" href="MonadicFragment.html#5161" class="Bound">t</a><a id="5162" class="Symbol">)</a> <a id="5164" class="Symbol">→</a> <a id="5166" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="5169" href="MonadicFragment.html#4956" class="Bound">M</a> <a id="5171" class="Symbol">(</a><a id="5172" href="Signature.html#2146" class="Function">para</a> <a id="5177" class="Symbol">(</a><a id="5178" href="Canon.html#923" class="Field">out</a> <a id="5182" class="Symbol">(</a><a id="5183" href="Canon.html#1328" class="Field">ival</a> <a id="5188" href="MonadicFragment.html#5058" class="Bound">c</a><a id="5189" class="Symbol">)))</a> <a id="5193" href="MonadicFragment.html#5157" class="Bound">Γ</a> <a id="5195" class="Symbol">(</a><a id="5196" href="Signature.html#2146" class="Function">para</a> <a id="5201" class="Symbol">(</a><a id="5202" href="Canon.html#923" class="Field">out</a> <a id="5206" class="Symbol">(</a><a id="5207" href="Canon.html#1328" class="Field">ival</a> <a id="5212" href="MonadicFragment.html#5058" class="Bound">c</a><a id="5213" class="Symbol">))</a> <a id="5216" href="MonadicFragment.html#5161" class="Bound">t</a><a id="5217" class="Symbol">)</a> <a id="5219" href="Relation.Unary.html#3359" class="Function">]</a><a id="5220" class="Symbol">)</a> <a id="5222" class="Symbol">(</a><a id="5223" href="Data.List.Base.html#1497" class="Function">Data.List.map</a> <a id="5237" class="Symbol">(</a><a id="5238" href="MonadicFragment.html#5062" class="Bound">Γ</a> <a id="5240" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,_</a><a id="5242" class="Symbol">)</a> <a id="5244" href="MonadicFragment.html#5066" class="Bound">xs</a><a id="5246" class="Symbol">)</a>
               <a id="5263" class="Symbol">→</a> <a id="5265" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="5268" href="MonadicFragment.html#4956" class="Bound">M</a> <a id="5270" class="Symbol">(</a><a id="5271" href="Signature.html#2146" class="Function">para</a> <a id="5276" class="Symbol">(</a><a id="5277" href="Canon.html#923" class="Field">out</a> <a id="5281" class="Symbol">(</a><a id="5282" href="Canon.html#1328" class="Field">ival</a> <a id="5287" href="MonadicFragment.html#5058" class="Bound">c</a><a id="5288" class="Symbol">)))</a> <a id="5292" href="MonadicFragment.html#5062" class="Bound">Γ</a> <a id="5294" class="Symbol">((λ</a> <a id="5298" href="MonadicFragment.html#5298" class="Bound">Σ</a> <a id="5300" class="Symbol">→</a> <a id="5302" href="Data.List.Relation.Unary.All.html#1397" class="Datatype">All</a> <a id="5306" class="Symbol">(λ</a> <a id="5309" href="MonadicFragment.html#5309" class="Bound">t</a> <a id="5311" class="Symbol">→</a> <a id="5313" class="Symbol">(</a><a id="5314" href="Signature.html#2146" class="Function">para</a> <a id="5319" class="Symbol">(</a><a id="5320" href="Canon.html#923" class="Field">out</a> <a id="5324" class="Symbol">(</a><a id="5325" href="Canon.html#1328" class="Field">ival</a> <a id="5330" href="MonadicFragment.html#5058" class="Bound">c</a><a id="5331" class="Symbol">)))</a> <a id="5335" href="MonadicFragment.html#5309" class="Bound">t</a> <a id="5337" href="MonadicFragment.html#5298" class="Bound">Σ</a><a id="5338" class="Symbol">)</a> <a id="5340" href="MonadicFragment.html#5066" class="Bound">xs</a><a id="5342" class="Symbol">))</a> <a id="5345" href="Relation.Unary.html#3359" class="Function">]</a>
    <a id="5351" href="MonadicFragment.html#5044" class="Function">sequence</a> <a id="5360" class="Symbol">{</a><a id="5361" class="Argument">xs</a> <a id="5364" class="Symbol">=</a> <a id="5366" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="5368" class="Symbol">}</a>        <a id="5377" href="Data.List.Relation.Unary.All.html#1460" class="InductiveConstructor">[]</a>         <a id="5388" class="Symbol">=</a> <a id="5390" href="MonadicFragment.html#1377" class="Function">return</a> <a id="5397" href="Data.List.Relation.Unary.All.html#1460" class="InductiveConstructor">[]</a>
    <a id="5404" href="MonadicFragment.html#5044" class="Function">sequence</a> <a id="5413" class="Symbol">{</a><a id="5414" class="Argument">xs</a> <a id="5417" class="Symbol">=</a> <a id="5419" href="Signature.html#1185" class="InductiveConstructor Operator">⟨</a> <a id="5421" class="Symbol">_</a> <a id="5423" href="Signature.html#1185" class="InductiveConstructor Operator">⟩</a> <a id="5425" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="5427" class="Symbol">_}</a> <a id="5430" class="Symbol">(</a><a id="5431" href="MonadicFragment.html#5431" class="Bound">px</a> <a id="5434" href="Data.List.Relation.Unary.All.html#1477" class="InductiveConstructor Operator">∷</a> <a id="5436" href="MonadicFragment.html#5436" class="Bound">pxs</a><a id="5439" class="Symbol">)</a> <a id="5441" class="Symbol">=</a> <a id="5443" class="Keyword">do</a>
      <a id="5452" href="MonadicFragment.html#5452" class="Bound">v</a>         <a id="5462" href="MonadicFragment.html#1515" class="Function Operator">←</a> <a id="5464" href="MonadicFragment.html#5431" class="Bound">px</a>
      <a id="5473" class="Symbol">(</a><a id="5474" href="MonadicFragment.html#5474" class="Bound">vs</a> <a id="5477" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5479" href="MonadicFragment.html#5479" class="Bound">v′</a><a id="5481" class="Symbol">)</a> <a id="5483" href="MonadicFragment.html#1515" class="Function Operator">←</a> <a id="5485" href="MonadicFragment.html#5044" class="Function">sequence</a> <a id="5494" href="MonadicFragment.html#5436" class="Bound">pxs</a> <a id="5498" href="MonadicFragment.html#2220" class="Function Operator">^</a> <a id="5500" href="MonadicFragment.html#5452" class="Bound">v</a>
      <a id="5508" href="MonadicFragment.html#1377" class="Function">return</a> <a id="5515" class="Symbol">(</a><a id="5516" href="MonadicFragment.html#5479" class="Bound">v′</a> <a id="5519" href="Data.List.Relation.Unary.All.html#1477" class="InductiveConstructor Operator">∷</a> <a id="5521" href="MonadicFragment.html#5474" class="Bound">vs</a><a id="5523" class="Symbol">)</a>

    <a id="5530" class="Keyword">open</a> <a id="5535" href="Box.html#603" class="Module">Necessary</a>
    <a id="5549" class="Keyword">open</a> <a id="5554" href="Box.html#690" class="Module">□</a>

    <a id="5561" href="MonadicFragment.html#5561" class="Function">lift</a> <a id="5566" class="Symbol">:</a> <a id="5568" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="5571" href="Box.html#690" class="Record">□</a> <a id="5573" href="Fragment.html#1390" class="Record">IFragment</a> <a id="5583" href="Relation.Unary.html#4338" class="Function Operator">⇒</a> <a id="5585" href="Box.html#690" class="Record">□</a> <a id="5587" class="Symbol">(</a><a id="5588" href="MonadicFragment.html#2639" class="Record">MonadicFragment</a> <a id="5604" href="MonadicFragment.html#4956" class="Bound">M</a><a id="5605" class="Symbol">)</a> <a id="5607" href="Relation.Unary.html#3359" class="Function">]</a>
    <a id="5613" href="Signature.html#2691" class="Field">Shapeᴵ</a>  <a id="5621" class="Symbol">(</a><a id="5622" href="MonadicFragment.html#2710" class="Field">exprᵐ</a> <a id="5628" class="Symbol">(</a><a id="5629" href="Box.html#759" class="Field">future</a> <a id="5636" class="Symbol">(</a><a id="5637" href="MonadicFragment.html#5561" class="Function">lift</a> <a id="5642" href="MonadicFragment.html#5642" class="Bound">φ</a><a id="5643" class="Symbol">)</a> <a id="5645" href="MonadicFragment.html#5645" class="Bound">r</a><a id="5646" class="Symbol">))</a> <a id="5649" class="Symbol">(</a><a id="5650" href="MonadicFragment.html#5650" class="Bound">Γ</a> <a id="5652" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5654" href="MonadicFragment.html#5654" class="Bound">t</a><a id="5655" class="Symbol">)</a>   <a id="5659" class="Symbol">=</a> <a id="5661" href="Signature.html#2691" class="Field">Shapeᴵ</a> <a id="5668" class="Symbol">(</a><a id="5669" href="Fragment.html#1444" class="Field">iexpr</a> <a id="5675" class="Symbol">(</a><a id="5676" href="Box.html#759" class="Field">future</a> <a id="5683" href="MonadicFragment.html#5642" class="Bound">φ</a> <a id="5685" href="MonadicFragment.html#5645" class="Bound">r</a><a id="5686" class="Symbol">))</a> <a id="5689" href="MonadicFragment.html#5654" class="Bound">t</a>
    <a id="5695" href="Signature.html#2721" class="Field">Indices</a> <a id="5703" class="Symbol">(</a><a id="5704" href="MonadicFragment.html#2710" class="Field">exprᵐ</a> <a id="5710" class="Symbol">(</a><a id="5711" href="Box.html#759" class="Field">future</a> <a id="5718" class="Symbol">(</a><a id="5719" href="MonadicFragment.html#5561" class="Function">lift</a> <a id="5724" href="MonadicFragment.html#5724" class="Bound">φ</a><a id="5725" class="Symbol">)</a> <a id="5727" href="MonadicFragment.html#5727" class="Bound">r</a><a id="5728" class="Symbol">))</a> <a id="5731" class="Symbol">{</a><a id="5732" href="MonadicFragment.html#5732" class="Bound">Γ</a> <a id="5734" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5736" class="Symbol">_}</a> <a id="5739" href="MonadicFragment.html#5739" class="Bound">s</a> <a id="5741" class="Symbol">=</a> <a id="5743" href="Data.List.Base.html#1497" class="Function">Data.List.map</a> <a id="5757" class="Symbol">(</a><a id="5758" href="MonadicFragment.html#5732" class="Bound">Γ</a> <a id="5760" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,_</a><a id="5762" class="Symbol">)</a> <a id="5764" class="Symbol">(</a><a id="5765" href="Signature.html#2721" class="Field">Indices</a> <a id="5773" class="Symbol">(</a><a id="5774" href="Fragment.html#1444" class="Field">iexpr</a> <a id="5780" class="Symbol">(</a><a id="5781" href="Box.html#759" class="Field">future</a> <a id="5788" href="MonadicFragment.html#5724" class="Bound">φ</a> <a id="5790" href="MonadicFragment.html#5727" class="Bound">r</a><a id="5791" class="Symbol">))</a> <a id="5794" href="MonadicFragment.html#5739" class="Bound">s</a><a id="5795" class="Symbol">)</a>
    <a id="5801" href="Signature.html#3726" class="Field">ialg</a> <a id="5806" class="Symbol">(</a><a id="5807" href="MonadicFragment.html#2799" class="Field">interpᵐ</a> <a id="5815" class="Symbol">(</a><a id="5816" href="Box.html#759" class="Field">future</a> <a id="5823" class="Symbol">(</a><a id="5824" href="MonadicFragment.html#5561" class="Function">lift</a> <a id="5829" href="MonadicFragment.html#5829" class="Bound">φ</a><a id="5830" class="Symbol">)</a> <a id="5832" href="MonadicFragment.html#5832" class="Bound">r</a><a id="5833" class="Symbol">))</a> <a id="5836" class="Symbol">(</a><a id="5837" href="MonadicFragment.html#5837" class="Bound">c</a> <a id="5839" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5841" href="Level.html#457" class="InductiveConstructor">L.lift</a> <a id="5848" href="MonadicFragment.html#5848" class="Bound">vxs</a><a id="5851" class="Symbol">)</a> <a id="5853" class="Symbol">=</a> <a id="5855" class="Keyword">do</a>
      <a id="5864" href="MonadicFragment.html#5864" class="Bound">vs</a> <a id="5867" href="MonadicFragment.html#1515" class="Function Operator">←</a> <a id="5869" href="MonadicFragment.html#5044" class="Function">sequence</a> <a id="5878" href="MonadicFragment.html#5848" class="Bound">vxs</a>
      <a id="5888" href="MonadicFragment.html#1377" class="Function">return</a> <a id="5895" class="Symbol">(</a><a id="5896" href="Signature.html#3726" class="Field">ialg</a> <a id="5901" class="Symbol">(</a><a id="5902" href="Fragment.html#1501" class="Field">iinterp</a> <a id="5910" class="Symbol">(</a><a id="5911" href="Box.html#759" class="Field">future</a> <a id="5918" href="MonadicFragment.html#5829" class="Bound">φ</a> <a id="5920" href="MonadicFragment.html#5832" class="Bound">r</a><a id="5921" class="Symbol">))</a> <a id="5924" class="Symbol">(</a><a id="5925" href="MonadicFragment.html#5837" class="Bound">c</a> <a id="5927" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5929" href="Level.html#457" class="InductiveConstructor">L.lift</a> <a id="5936" href="MonadicFragment.html#5864" class="Bound">vs</a><a id="5938" class="Symbol">))</a>


</pre></body></html>