<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Structure.Monad</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Pragma">--without-K</a> <a id="32" class="Symbol">#-}</a>

<a id="37" class="Keyword">module</a> <a id="44" href="Structure.Monad.html" class="Module">Structure.Monad</a> <a id="60" class="Keyword">where</a>

<a id="67" class="Keyword">open</a> <a id="72" class="Keyword">import</a> <a id="79" href="Core.html" class="Module">Core</a>
<a id="84" class="Keyword">open</a> <a id="89" class="Keyword">import</a> <a id="96" href="Level.html" class="Module">Level</a>
<a id="102" class="Keyword">open</a> <a id="107" class="Keyword">import</a> <a id="114" href="Function.html" class="Module">Function</a>

<a id="124" class="Keyword">open</a> <a id="129" class="Keyword">import</a> <a id="136" href="Relation.Unary.html" class="Module">Relation.Unary</a>  <a id="152" class="Keyword">using</a> <a id="158" class="Symbol">(</a><a id="159" href="Relation.Unary.html#3359" class="Function">IUniversal</a> <a id="170" class="Symbol">;</a> <a id="172" href="Relation.Unary.html#4338" class="Function Operator">_⇒_</a> <a id="176" class="Symbol">;</a> <a id="178" href="Relation.Unary.html#4503" class="Function Operator">_∩_</a><a id="181" class="Symbol">)</a>

<a id="184" class="Keyword">open</a> <a id="189" class="Keyword">import</a> <a id="196" href="Relation.Binary.html" class="Module">Relation.Binary</a>                       <a id="234" class="Keyword">using</a> <a id="240" class="Symbol">(</a><a id="241" href="Relation.Binary.Core.html#882" class="Function">Rel</a><a id="244" class="Symbol">)</a>
<a id="246" class="Keyword">open</a> <a id="251" class="Keyword">import</a> <a id="258" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="296" class="Keyword">using</a> <a id="302" class="Symbol">(</a><a id="303" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="308" class="Symbol">;</a> <a id="310" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">_≡_</a><a id="313" class="Symbol">)</a>
<a id="315" class="Keyword">open</a> <a id="320" class="Keyword">import</a> <a id="327" href="Relation.Binary.Structures.html" class="Module">Relation.Binary.Structures</a>            <a id="365" class="Keyword">using</a> <a id="371" class="Symbol">(</a><a id="372" href="Relation.Binary.Structures.html#2163" class="Record">IsPreorder</a><a id="382" class="Symbol">)</a>

<a id="385" class="Keyword">open</a> <a id="390" class="Keyword">import</a> <a id="397" href="Data.Product.html" class="Module">Data.Product</a> <a id="410" class="Keyword">using</a> <a id="416" class="Symbol">(</a><a id="417" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="423" class="Symbol">;</a> <a id="425" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,_</a><a id="428" class="Symbol">)</a>

<a id="431" class="Keyword">module</a> <a id="438" href="Structure.Monad.html#438" class="Module">_</a> <a id="440" class="Keyword">where</a>

  <a id="449" class="Keyword">record</a> <a id="456" href="Structure.Monad.html#456" class="Record">RawMonad</a> <a id="465" class="Symbol">{</a><a id="466" href="Structure.Monad.html#466" class="Bound">I</a> <a id="468" class="Symbol">:</a> <a id="470" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="474" href="Core.html#134" class="Generalizable">i</a><a id="475" class="Symbol">}</a> <a id="477" class="Symbol">(</a><a id="478" href="Structure.Monad.html#478" class="Bound">M</a> <a id="480" class="Symbol">:</a> <a id="482" class="Symbol">(</a><a id="483" href="Structure.Monad.html#466" class="Bound">I</a> <a id="485" class="Symbol">→</a> <a id="487" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="491" href="Core.html#140" class="Generalizable">ℓ</a><a id="492" class="Symbol">)</a> <a id="494" class="Symbol">→</a> <a id="496" class="Symbol">(</a><a id="497" href="Structure.Monad.html#466" class="Bound">I</a> <a id="499" class="Symbol">→</a> <a id="501" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="505" href="Core.html#140" class="Generalizable">ℓ</a><a id="506" class="Symbol">))</a> <a id="509" class="Symbol">:</a> <a id="511" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="515" class="Symbol">(</a><a id="516" href="Structure.Monad.html#474" class="Bound">i</a> <a id="518" href="Agda.Primitive.html#736" class="Primitive Operator">⊔</a> <a id="520" href="Agda.Primitive.html#706" class="Primitive">suc</a> <a id="524" href="Structure.Monad.html#491" class="Bound">ℓ</a><a id="525" class="Symbol">)</a> <a id="527" class="Keyword">where</a>
    <a id="537" class="Keyword">field</a> <a id="543" href="Structure.Monad.html#543" class="Field">return</a> <a id="550" class="Symbol">:</a> <a id="552" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="555" href="Core.html#280" class="Generalizable">P</a> <a id="557" href="Relation.Unary.html#4338" class="Function Operator">⇒</a> <a id="559" href="Structure.Monad.html#478" class="Bound">M</a> <a id="561" href="Core.html#280" class="Generalizable">P</a> <a id="563" href="Relation.Unary.html#3359" class="Function">]</a>
          <a id="575" href="Structure.Monad.html#575" class="Field">bind</a>   <a id="582" class="Symbol">:</a> <a id="584" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="587" href="Core.html#280" class="Generalizable">P</a> <a id="589" href="Relation.Unary.html#4338" class="Function Operator">⇒</a> <a id="591" href="Structure.Monad.html#478" class="Bound">M</a> <a id="593" href="Core.html#282" class="Generalizable">Q</a> <a id="595" href="Relation.Unary.html#3359" class="Function">]</a> <a id="597" class="Symbol">→</a> <a id="599" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="602" href="Structure.Monad.html#478" class="Bound">M</a> <a id="604" href="Core.html#280" class="Generalizable">P</a> <a id="606" href="Relation.Unary.html#4338" class="Function Operator">⇒</a> <a id="608" href="Structure.Monad.html#478" class="Bound">M</a> <a id="610" href="Core.html#282" class="Generalizable">Q</a> <a id="612" href="Relation.Unary.html#3359" class="Function">]</a>

    <a id="619" href="Structure.Monad.html#619" class="Function Operator">_&gt;&gt;=_</a> <a id="625" class="Symbol">:</a> <a id="627" class="Symbol">∀</a> <a id="629" class="Symbol">{</a><a id="630" href="Structure.Monad.html#630" class="Bound">i</a><a id="631" class="Symbol">}</a> <a id="633" class="Symbol">→</a> <a id="635" href="Structure.Monad.html#478" class="Bound">M</a> <a id="637" href="Core.html#280" class="Generalizable">P</a> <a id="639" href="Structure.Monad.html#630" class="Bound">i</a> <a id="641" class="Symbol">→</a> <a id="643" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="646" href="Core.html#280" class="Generalizable">P</a> <a id="648" href="Relation.Unary.html#4338" class="Function Operator">⇒</a> <a id="650" href="Structure.Monad.html#478" class="Bound">M</a> <a id="652" href="Core.html#282" class="Generalizable">Q</a> <a id="654" href="Relation.Unary.html#3359" class="Function">]</a> <a id="656" class="Symbol">→</a> <a id="658" href="Structure.Monad.html#478" class="Bound">M</a> <a id="660" href="Core.html#282" class="Generalizable">Q</a> <a id="662" href="Structure.Monad.html#630" class="Bound">i</a>
    <a id="668" href="Structure.Monad.html#668" class="Bound">x</a> <a id="670" href="Structure.Monad.html#619" class="Function Operator">&gt;&gt;=</a> <a id="674" href="Structure.Monad.html#674" class="Bound">f</a> <a id="676" class="Symbol">=</a> <a id="678" href="Structure.Monad.html#575" class="Field">bind</a> <a id="683" href="Structure.Monad.html#674" class="Bound">f</a> <a id="685" href="Structure.Monad.html#668" class="Bound">x</a> 
  
    <a id="695" href="Structure.Monad.html#695" class="Function Operator">_&gt;&gt;_</a> <a id="700" class="Symbol">:</a> <a id="702" class="Symbol">∀</a> <a id="704" class="Symbol">{</a><a id="705" href="Structure.Monad.html#705" class="Bound">i</a><a id="706" class="Symbol">}</a> <a id="708" class="Symbol">→</a> <a id="710" href="Structure.Monad.html#478" class="Bound">M</a> <a id="712" href="Core.html#280" class="Generalizable">P</a> <a id="714" href="Structure.Monad.html#705" class="Bound">i</a> <a id="716" class="Symbol">→</a> <a id="718" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="721" href="Structure.Monad.html#478" class="Bound">M</a> <a id="723" href="Core.html#282" class="Generalizable">Q</a> <a id="725" href="Relation.Unary.html#3359" class="Function">]</a> <a id="727" class="Symbol">→</a> <a id="729" href="Structure.Monad.html#478" class="Bound">M</a> <a id="731" href="Core.html#282" class="Generalizable">Q</a> <a id="733" href="Structure.Monad.html#705" class="Bound">i</a>
    <a id="739" href="Structure.Monad.html#739" class="Bound">x</a> <a id="741" href="Structure.Monad.html#695" class="Function Operator">&gt;&gt;</a> <a id="744" href="Structure.Monad.html#744" class="Bound">y</a> <a id="746" class="Symbol">=</a> <a id="748" href="Structure.Monad.html#739" class="Bound">x</a> <a id="750" href="Structure.Monad.html#619" class="Function Operator">&gt;&gt;=</a> <a id="754" class="Symbol">λ</a> <a id="756" href="Structure.Monad.html#756" class="Bound">_</a> <a id="758" class="Symbol">→</a> <a id="760" href="Structure.Monad.html#744" class="Bound">y</a>

    <a id="767" href="Structure.Monad.html#767" class="Function">join</a> <a id="772" class="Symbol">:</a> <a id="774" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="777" href="Structure.Monad.html#478" class="Bound">M</a> <a id="779" class="Symbol">(</a><a id="780" href="Structure.Monad.html#478" class="Bound">M</a> <a id="782" href="Core.html#280" class="Generalizable">P</a><a id="783" class="Symbol">)</a> <a id="785" href="Relation.Unary.html#4338" class="Function Operator">⇒</a> <a id="787" href="Structure.Monad.html#478" class="Bound">M</a> <a id="789" href="Core.html#280" class="Generalizable">P</a> <a id="791" href="Relation.Unary.html#3359" class="Function">]</a>
    <a id="797" href="Structure.Monad.html#767" class="Function">join</a> <a id="802" href="Structure.Monad.html#802" class="Bound">x</a> <a id="804" class="Symbol">=</a> <a id="806" href="Structure.Monad.html#575" class="Field">bind</a> <a id="811" href="Function.Base.html#615" class="Function">id</a> <a id="814" href="Structure.Monad.html#802" class="Bound">x</a>
  
  <a id="821" class="Keyword">record</a> <a id="828" href="Structure.Monad.html#828" class="Record">RawComonad</a> <a id="839" class="Symbol">{</a><a id="840" href="Structure.Monad.html#840" class="Bound">I</a> <a id="842" class="Symbol">:</a> <a id="844" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="848" href="Core.html#134" class="Generalizable">i</a><a id="849" class="Symbol">}</a> <a id="851" class="Symbol">(</a><a id="852" href="Structure.Monad.html#852" class="Bound">W</a> <a id="854" class="Symbol">:</a> <a id="856" class="Symbol">(</a><a id="857" href="Structure.Monad.html#840" class="Bound">I</a> <a id="859" class="Symbol">→</a> <a id="861" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="865" href="Core.html#140" class="Generalizable">ℓ</a><a id="866" class="Symbol">)</a> <a id="868" class="Symbol">→</a> <a id="870" class="Symbol">(</a><a id="871" href="Structure.Monad.html#840" class="Bound">I</a> <a id="873" class="Symbol">→</a> <a id="875" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="879" href="Core.html#140" class="Generalizable">ℓ</a><a id="880" class="Symbol">))</a> <a id="883" class="Symbol">:</a> <a id="885" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="889" class="Symbol">(</a><a id="890" href="Structure.Monad.html#848" class="Bound">i</a> <a id="892" href="Agda.Primitive.html#736" class="Primitive Operator">⊔</a> <a id="894" href="Agda.Primitive.html#706" class="Primitive">suc</a> <a id="898" href="Structure.Monad.html#865" class="Bound">ℓ</a><a id="899" class="Symbol">)</a> <a id="901" class="Keyword">where</a>
    <a id="911" class="Keyword">field</a> <a id="917" href="Structure.Monad.html#917" class="Field">extract</a> <a id="925" class="Symbol">:</a> <a id="927" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="930" href="Structure.Monad.html#852" class="Bound">W</a> <a id="932" href="Core.html#280" class="Generalizable">P</a> <a id="934" href="Relation.Unary.html#4338" class="Function Operator">⇒</a> <a id="936" href="Core.html#280" class="Generalizable">P</a> <a id="938" href="Relation.Unary.html#3359" class="Function">]</a>
          <a id="950" href="Structure.Monad.html#950" class="Field">extend</a>  <a id="958" class="Symbol">:</a> <a id="960" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="963" href="Structure.Monad.html#852" class="Bound">W</a> <a id="965" href="Core.html#280" class="Generalizable">P</a> <a id="967" href="Relation.Unary.html#4338" class="Function Operator">⇒</a> <a id="969" href="Core.html#282" class="Generalizable">Q</a> <a id="971" href="Relation.Unary.html#3359" class="Function">]</a> <a id="973" class="Symbol">→</a> <a id="975" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="978" href="Structure.Monad.html#852" class="Bound">W</a> <a id="980" href="Core.html#280" class="Generalizable">P</a> <a id="982" href="Relation.Unary.html#4338" class="Function Operator">⇒</a> <a id="984" href="Structure.Monad.html#852" class="Bound">W</a> <a id="986" href="Core.html#282" class="Generalizable">Q</a> <a id="988" href="Relation.Unary.html#3359" class="Function">]</a>


    <a id="996" href="Structure.Monad.html#996" class="Function">duplicate</a> <a id="1006" class="Symbol">:</a> <a id="1008" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="1011" href="Structure.Monad.html#852" class="Bound">W</a> <a id="1013" href="Core.html#280" class="Generalizable">P</a> <a id="1015" href="Relation.Unary.html#4338" class="Function Operator">⇒</a> <a id="1017" href="Structure.Monad.html#852" class="Bound">W</a> <a id="1019" class="Symbol">(</a><a id="1020" href="Structure.Monad.html#852" class="Bound">W</a> <a id="1022" href="Core.html#280" class="Generalizable">P</a><a id="1023" class="Symbol">)</a> <a id="1025" href="Relation.Unary.html#3359" class="Function">]</a>
    <a id="1031" href="Structure.Monad.html#996" class="Function">duplicate</a> <a id="1041" href="Structure.Monad.html#1041" class="Bound">x</a> <a id="1043" class="Symbol">=</a> <a id="1045" href="Structure.Monad.html#950" class="Field">extend</a> <a id="1052" href="Function.Base.html#615" class="Function">id</a> <a id="1055" href="Structure.Monad.html#1041" class="Bound">x</a>

<a id="1058" class="Keyword">module</a> <a id="Wk"></a><a id="1065" href="Structure.Monad.html#1065" class="Module">Wk</a> <a id="1068" class="Symbol">{</a><a id="1069" href="Structure.Monad.html#1069" class="Bound">A</a> <a id="1071" class="Symbol">:</a> <a id="1073" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1077" href="Core.html#127" class="Generalizable">a</a><a id="1078" class="Symbol">}</a> <a id="1080" class="Symbol">(</a><a id="1081" href="Structure.Monad.html#1081" class="Bound Operator">_~_</a>  <a id="1086" class="Symbol">:</a> <a id="1088" href="Relation.Binary.Core.html#882" class="Function">Rel</a> <a id="1092" href="Structure.Monad.html#1069" class="Bound">A</a> <a id="1094" href="Core.html#127" class="Generalizable">a</a><a id="1095" class="Symbol">)</a> <a id="1097" class="Keyword">where</a>

  <a id="1106" class="Keyword">record</a> <a id="Wk.Weakenable"></a><a id="1113" href="Structure.Monad.html#1113" class="Record">Weakenable</a> <a id="1124" class="Symbol">{</a><a id="1125" href="Structure.Monad.html#1125" class="Bound">ℓ</a><a id="1126" class="Symbol">}</a> <a id="1128" class="Symbol">(</a><a id="1129" href="Structure.Monad.html#1129" class="Bound">P</a> <a id="1131" class="Symbol">:</a> <a id="1133" href="Structure.Monad.html#1069" class="Bound">A</a> <a id="1135" class="Symbol">→</a> <a id="1137" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1141" href="Structure.Monad.html#1125" class="Bound">ℓ</a><a id="1142" class="Symbol">)</a> <a id="1144" class="Symbol">:</a> <a id="1146" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1150" class="Symbol">(</a><a id="1151" href="Structure.Monad.html#1125" class="Bound">ℓ</a> <a id="1153" href="Agda.Primitive.html#736" class="Primitive Operator">⊔</a> <a id="1155" href="Structure.Monad.html#1077" class="Bound">a</a><a id="1156" class="Symbol">)</a> <a id="1158" class="Keyword">where</a>
    <a id="1168" class="Keyword">field</a>
      <a id="Wk.Weakenable.wk"></a><a id="1180" href="Structure.Monad.html#1180" class="Field">wk</a> <a id="1183" class="Symbol">:</a> <a id="1185" class="Symbol">∀</a> <a id="1187" class="Symbol">{</a><a id="1188" href="Structure.Monad.html#1188" class="Bound">x</a> <a id="1190" href="Structure.Monad.html#1190" class="Bound">x′</a><a id="1192" class="Symbol">}</a> <a id="1194" class="Symbol">→</a> <a id="1196" href="Structure.Monad.html#1188" class="Bound">x</a> <a id="1198" href="Structure.Monad.html#1081" class="Bound Operator">~</a> <a id="1200" href="Structure.Monad.html#1190" class="Bound">x′</a> <a id="1203" class="Symbol">→</a> <a id="1205" href="Structure.Monad.html#1129" class="Bound">P</a> <a id="1207" href="Structure.Monad.html#1188" class="Bound">x</a> <a id="1209" class="Symbol">→</a> <a id="1211" href="Structure.Monad.html#1129" class="Bound">P</a> <a id="1213" href="Structure.Monad.html#1190" class="Bound">x′</a>

  <a id="1219" class="Keyword">record</a> <a id="Wk.Strength"></a><a id="1226" href="Structure.Monad.html#1226" class="Record">Strength</a> <a id="1235" class="Symbol">{</a><a id="1236" href="Structure.Monad.html#1236" class="Bound">M</a> <a id="1238" class="Symbol">:</a> <a id="1240" class="Symbol">(</a><a id="1241" href="Structure.Monad.html#1069" class="Bound">A</a> <a id="1243" class="Symbol">→</a> <a id="1245" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1249" href="Structure.Monad.html#1077" class="Bound">a</a><a id="1250" class="Symbol">)</a> <a id="1252" class="Symbol">→</a> <a id="1254" href="Structure.Monad.html#1069" class="Bound">A</a> <a id="1256" class="Symbol">→</a> <a id="1258" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1262" href="Structure.Monad.html#1077" class="Bound">a</a><a id="1263" class="Symbol">}</a> <a id="1265" class="Symbol">(</a><a id="1266" href="Structure.Monad.html#1266" class="Bound">mon</a> <a id="1270" class="Symbol">:</a> <a id="1272" href="Structure.Monad.html#456" class="Record">RawMonad</a> <a id="1281" href="Structure.Monad.html#1236" class="Bound">M</a><a id="1282" class="Symbol">)</a> <a id="1284" class="Symbol">:</a> <a id="1286" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1290" class="Symbol">(</a><a id="1291" href="Agda.Primitive.html#706" class="Primitive">suc</a> <a id="1295" href="Structure.Monad.html#1077" class="Bound">a</a><a id="1296" class="Symbol">)</a> <a id="1298" class="Keyword">where</a>  
     <a id="1311" class="Keyword">infix</a> <a id="1317" class="Number">10</a> _^_ 
     <a id="1330" class="Keyword">field</a> <a id="Wk.Strength._^_"></a><a id="1336" href="Structure.Monad.html#1336" class="Field Operator">_^_</a> <a id="1340" class="Symbol">:</a> <a id="1342" class="Symbol">∀</a> <a id="1344" class="Symbol">{</a><a id="1345" href="Structure.Monad.html#1345" class="Bound">P</a> <a id="1347" href="Structure.Monad.html#1347" class="Bound">Q</a> <a id="1349" class="Symbol">:</a> <a id="1351" href="Structure.Monad.html#1069" class="Bound">A</a> <a id="1353" class="Symbol">→</a> <a id="1355" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1359" href="Structure.Monad.html#1077" class="Bound">a</a><a id="1360" class="Symbol">}</a> <a id="1362" class="Symbol">→</a> <a id="1364" class="Symbol">⦃</a> <a id="1366" href="Structure.Monad.html#1113" class="Record">Weakenable</a> <a id="1377" href="Structure.Monad.html#1347" class="Bound">Q</a> <a id="1379" class="Symbol">⦄</a> <a id="1381" class="Symbol">→</a> <a id="1383" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="1386" href="Structure.Monad.html#1236" class="Bound">M</a> <a id="1388" href="Structure.Monad.html#1345" class="Bound">P</a> <a id="1390" href="Relation.Unary.html#4338" class="Function Operator">⇒</a> <a id="1392" href="Structure.Monad.html#1347" class="Bound">Q</a> <a id="1394" href="Relation.Unary.html#4338" class="Function Operator">⇒</a> <a id="1396" href="Structure.Monad.html#1236" class="Bound">M</a> <a id="1398" class="Symbol">(</a><a id="1399" href="Structure.Monad.html#1345" class="Bound">P</a> <a id="1401" href="Relation.Unary.html#4503" class="Function Operator">∩</a> <a id="1403" href="Structure.Monad.html#1347" class="Bound">Q</a><a id="1404" class="Symbol">)</a> <a id="1406" href="Relation.Unary.html#3359" class="Function">]</a>

<a id="1409" class="Comment">{- Monad/Comonad instances for diamond/box + monadic strength -}</a> 
<a id="1475" class="Keyword">module</a> <a id="Closure"></a><a id="1482" href="Structure.Monad.html#1482" class="Module">Closure</a> <a id="1490" class="Symbol">{</a><a id="1491" href="Structure.Monad.html#1491" class="Bound">A</a> <a id="1493" class="Symbol">:</a> <a id="1495" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1499" href="Core.html#127" class="Generalizable">a</a><a id="1500" class="Symbol">}</a> <a id="1502" class="Symbol">(</a><a id="1503" href="Structure.Monad.html#1503" class="Bound Operator">_~_</a>  <a id="1508" class="Symbol">:</a> <a id="1510" href="Relation.Binary.Core.html#882" class="Function">Rel</a> <a id="1514" href="Structure.Monad.html#1491" class="Bound">A</a> <a id="1516" href="Core.html#127" class="Generalizable">a</a><a id="1517" class="Symbol">)</a> <a id="1519" class="Symbol">(</a><a id="1520" href="Structure.Monad.html#1520" class="Bound">pre</a> <a id="1524" class="Symbol">:</a> <a id="1526" href="Relation.Binary.Structures.html#2163" class="Record">IsPreorder</a> <a id="1537" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">_≡_</a> <a id="1541" href="Structure.Monad.html#1503" class="Bound Operator">_~_</a><a id="1544" class="Symbol">)</a> <a id="1546" class="Keyword">where</a>

  <a id="1555" class="Keyword">open</a> <a id="1560" class="Keyword">import</a> <a id="1567" href="Relation.Unary.Closure.Base.html" class="Module">Relation.Unary.Closure.Base</a> <a id="1595" href="Structure.Monad.html#1503" class="Bound Operator">_~_</a>
  <a id="1601" class="Keyword">open</a> <a id="1606" class="Keyword">import</a> <a id="1613" href="Structure.Functor.html" class="Module">Structure.Functor</a>

  <a id="1634" class="Keyword">instance</a> <a id="Closure.◇-functor"></a><a id="1643" href="Structure.Monad.html#1643" class="Function">◇-functor</a> <a id="1653" class="Symbol">:</a> <a id="1655" href="Structure.Functor.html#183" class="Record">RawFunctor</a> <a id="1666" class="Symbol">{</a><a id="1667" class="Argument">ℓ</a> <a id="1669" class="Symbol">=</a> <a id="1671" href="Structure.Monad.html#1499" class="Bound">a</a><a id="1672" class="Symbol">}</a> <a id="1674" href="Relation.Unary.Closure.Base.html#1717" class="Function">◇</a> 
  <a id="1679" href="Structure.Functor.html#273" class="Field">RawFunctor.fmap</a> <a id="1695" href="Structure.Monad.html#1643" class="Function">◇-functor</a> <a id="1705" href="Structure.Monad.html#1705" class="Bound">f</a> <a id="1707" href="Structure.Monad.html#1707" class="Bound">x</a> <a id="1709" class="Symbol">=</a> <a id="1711" href="Relation.Unary.Closure.Base.html#3767" class="Function">◇.map</a> <a id="1717" href="Structure.Monad.html#1705" class="Bound">f</a> <a id="1719" href="Structure.Monad.html#1707" class="Bound">x</a>

  <a id="1724" class="Keyword">open</a> <a id="1729" href="Structure.Functor.html#183" class="Module">RawFunctor</a> <a id="1740" class="Symbol">⦃...⦄</a>

  <a id="1749" class="Keyword">instance</a> <a id="Closure.◇-monad"></a><a id="1758" href="Structure.Monad.html#1758" class="Function">◇-monad</a> <a id="1766" class="Symbol">:</a> <a id="1768" href="Structure.Monad.html#456" class="Record">RawMonad</a> <a id="1777" class="Symbol">{</a><a id="1778" class="Argument">ℓ</a> <a id="1780" class="Symbol">=</a> <a id="1782" href="Structure.Monad.html#1499" class="Bound">a</a><a id="1783" class="Symbol">}</a> <a id="1785" href="Relation.Unary.Closure.Base.html#1717" class="Function">◇</a>
  <a id="1789" href="Structure.Monad.html#543" class="Field">RawMonad.return</a> <a id="1805" href="Structure.Monad.html#1758" class="Function">◇-monad</a>   <a id="1815" class="Symbol">=</a> <a id="1817" href="Relation.Unary.Closure.Base.html#3879" class="Function">◇.pure</a> <a id="1824" class="Symbol">(</a><a id="1825" href="Relation.Binary.Structures.html#2331" class="Field">IsPreorder.reflexive</a> <a id="1846" href="Structure.Monad.html#1520" class="Bound">pre</a> <a id="1850" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="1854" class="Symbol">)</a>
  <a id="1858" href="Structure.Monad.html#575" class="Field">RawMonad.bind</a>   <a id="1874" href="Structure.Monad.html#1758" class="Function">◇-monad</a> <a id="1882" href="Structure.Monad.html#1882" class="Bound">f</a> <a id="1884" class="Symbol">=</a> <a id="1886" href="Relation.Unary.Closure.Base.html#3953" class="Function">◇.join</a> <a id="1893" class="Symbol">(</a><a id="1894" href="Relation.Binary.Structures.html#2361" class="Field">IsPreorder.trans</a> <a id="1911" href="Structure.Monad.html#1520" class="Bound">pre</a><a id="1914" class="Symbol">)</a> <a id="1916" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="1918" class="Symbol">(</a><a id="1919" href="Structure.Functor.html#273" class="Field">fmap</a> <a id="1924" href="Structure.Monad.html#1882" class="Bound">f</a><a id="1925" class="Symbol">)</a>

  <a id="Closure.thing"></a><a id="1930" href="Structure.Monad.html#1930" class="Function">thing</a> <a id="1936" class="Symbol">:</a> <a id="1938" class="Symbol">∀</a> <a id="1940" class="Symbol">{</a><a id="1941" href="Structure.Monad.html#1941" class="Bound">x</a><a id="1942" class="Symbol">}</a> <a id="1944" class="Symbol">→</a> <a id="1946" class="Symbol">(</a><a id="1947" href="Structure.Monad.html#1947" class="Bound">possible</a> <a id="1956" class="Symbol">:</a> <a id="1958" href="Relation.Unary.Closure.Base.html#1717" class="Function">◇</a> <a id="1960" href="Core.html#280" class="Generalizable">P</a> <a id="1962" href="Structure.Monad.html#1941" class="Bound">x</a><a id="1963" class="Symbol">)</a> <a id="1965" class="Symbol">→</a> <a id="1967" href="Core.html#280" class="Generalizable">P</a> <a id="1969" class="Symbol">(</a><a id="1970" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="1976" href="Structure.Monad.html#1947" class="Bound">possible</a><a id="1984" class="Symbol">)</a>
  <a id="1988" href="Structure.Monad.html#1930" class="Function">thing</a> <a id="1994" class="Symbol">(_</a> <a id="1997" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1999" class="Symbol">_</a> <a id="2001" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2003" href="Structure.Monad.html#2003" class="Bound">px</a><a id="2005" class="Symbol">)</a> <a id="2007" class="Symbol">=</a> <a id="2009" href="Structure.Monad.html#2003" class="Bound">px</a>

  <a id="Closure.thinning"></a><a id="2015" href="Structure.Monad.html#2015" class="Function">thinning</a> <a id="2024" class="Symbol">:</a> <a id="2026" class="Symbol">∀</a> <a id="2028" class="Symbol">{</a><a id="2029" href="Structure.Monad.html#2029" class="Bound">x</a><a id="2030" class="Symbol">}</a> <a id="2032" class="Symbol">→</a> <a id="2034" class="Symbol">(</a><a id="2035" href="Structure.Monad.html#2035" class="Bound">possible</a> <a id="2044" class="Symbol">:</a> <a id="2046" href="Relation.Unary.Closure.Base.html#1717" class="Function">◇</a> <a id="2048" href="Core.html#280" class="Generalizable">P</a> <a id="2050" href="Structure.Monad.html#2029" class="Bound">x</a><a id="2051" class="Symbol">)</a> <a id="2053" class="Symbol">→</a> <a id="2055" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="2061" href="Structure.Monad.html#2035" class="Bound">possible</a> <a id="2070" href="Structure.Monad.html#1503" class="Bound Operator">~</a> <a id="2072" href="Structure.Monad.html#2029" class="Bound">x</a> 
  <a id="2077" href="Structure.Monad.html#2015" class="Function">thinning</a> <a id="2086" class="Symbol">(_</a> <a id="2089" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2091" href="Structure.Monad.html#2091" class="Bound">σ</a> <a id="2093" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2095" class="Symbol">_)</a> <a id="2098" class="Symbol">=</a> <a id="2100" href="Structure.Monad.html#2091" class="Bound">σ</a>

  <a id="2105" class="Keyword">instance</a> <a id="Closure.□-functor"></a><a id="2114" href="Structure.Monad.html#2114" class="Function">□-functor</a> <a id="2124" class="Symbol">:</a> <a id="2126" href="Structure.Functor.html#183" class="Record">RawFunctor</a> <a id="2137" class="Symbol">{</a><a id="2138" class="Argument">ℓ</a> <a id="2140" class="Symbol">=</a> <a id="2142" href="Structure.Monad.html#1499" class="Bound">a</a><a id="2143" class="Symbol">}</a> <a id="2145" href="Relation.Unary.Closure.Base.html#843" class="Function">□</a>
  <a id="2149" href="Structure.Functor.html#273" class="Field">RawFunctor.fmap</a> <a id="2165" href="Structure.Monad.html#2114" class="Function">□-functor</a> <a id="2175" href="Structure.Monad.html#2175" class="Bound">f</a> <a id="2177" href="Structure.Monad.html#2177" class="Bound">x</a> <a id="2179" class="Symbol">=</a> <a id="2181" href="Relation.Unary.Closure.Base.html#3071" class="Function">□.map</a> <a id="2187" href="Structure.Monad.html#2175" class="Bound">f</a> <a id="2189" href="Structure.Monad.html#2177" class="Bound">x</a>

  <a id="2194" class="Keyword">instance</a> <a id="Closure.□-comonad"></a><a id="2203" href="Structure.Monad.html#2203" class="Function">□-comonad</a> <a id="2213" class="Symbol">:</a> <a id="2215" href="Structure.Monad.html#828" class="Record">RawComonad</a> <a id="2226" class="Symbol">{</a><a id="2227" class="Argument">ℓ</a> <a id="2229" class="Symbol">=</a> <a id="2231" href="Structure.Monad.html#1499" class="Bound">a</a><a id="2232" class="Symbol">}</a> <a id="2234" href="Relation.Unary.Closure.Base.html#843" class="Function">□</a>
  <a id="2238" href="Structure.Monad.html#917" class="Field">RawComonad.extract</a> <a id="2257" href="Structure.Monad.html#2203" class="Function">□-comonad</a>   <a id="2269" class="Symbol">=</a> <a id="2271" href="Relation.Unary.Closure.Base.html#3173" class="Function">□.extract</a> <a id="2281" class="Symbol">(</a><a id="2282" href="Relation.Binary.Structures.html#2331" class="Field">IsPreorder.reflexive</a> <a id="2303" href="Structure.Monad.html#1520" class="Bound">pre</a> <a id="2307" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="2311" class="Symbol">)</a>
  <a id="2315" href="Structure.Monad.html#950" class="Field">RawComonad.extend</a>  <a id="2334" href="Structure.Monad.html#2203" class="Function">□-comonad</a> <a id="2344" href="Structure.Monad.html#2344" class="Bound">f</a> <a id="2346" class="Symbol">=</a> <a id="2348" href="Structure.Functor.html#273" class="Field">fmap</a> <a id="2353" href="Structure.Monad.html#2344" class="Bound">f</a> <a id="2355" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="2357" href="Relation.Unary.Closure.Base.html#3250" class="Function">□.duplicate</a> <a id="2369" class="Symbol">(</a><a id="2370" href="Relation.Binary.Structures.html#2361" class="Field">IsPreorder.trans</a> <a id="2387" href="Structure.Monad.html#1520" class="Bound">pre</a><a id="2390" class="Symbol">)</a>

  <a id="Closure.widen"></a><a id="2395" href="Structure.Monad.html#2395" class="Function">widen</a> <a id="2401" class="Symbol">:</a> <a id="2403" class="Symbol">∀</a> <a id="2405" class="Symbol">{</a><a id="2406" href="Structure.Monad.html#2406" class="Bound">P</a> <a id="2408" class="Symbol">:</a> <a id="2410" href="Core.html#316" class="Function">Pred</a> <a id="2415" href="Structure.Monad.html#1491" class="Bound">A</a><a id="2416" class="Symbol">}</a> <a id="2418" class="Symbol">{</a><a id="2419" href="Structure.Monad.html#2419" class="Bound">Σ</a> <a id="2421" href="Structure.Monad.html#2421" class="Bound">Σ′</a><a id="2423" class="Symbol">}</a> <a id="2425" class="Symbol">→</a> <a id="2427" href="Structure.Monad.html#2419" class="Bound">Σ</a> <a id="2429" href="Structure.Monad.html#1503" class="Bound Operator">~</a> <a id="2431" href="Structure.Monad.html#2421" class="Bound">Σ′</a> <a id="2434" class="Symbol">→</a> <a id="2436" href="Relation.Unary.Closure.Base.html#1717" class="Function">◇</a> <a id="2438" href="Structure.Monad.html#2406" class="Bound">P</a> <a id="2440" href="Structure.Monad.html#2419" class="Bound">Σ</a> <a id="2442" class="Symbol">→</a> <a id="2444" href="Relation.Unary.Closure.Base.html#1717" class="Function">◇</a> <a id="2446" href="Structure.Monad.html#2406" class="Bound">P</a> <a id="2448" href="Structure.Monad.html#2421" class="Bound">Σ′</a>
  <a id="2453" href="Structure.Monad.html#2395" class="Function">widen</a> <a id="2459" href="Structure.Monad.html#2459" class="Bound">σ</a> <a id="2461" href="Structure.Monad.html#2461" class="Bound">px</a> <a id="2464" class="Symbol">=</a> <a id="2466" href="Relation.Unary.Closure.Base.html#3584" class="Function">◇.reindex</a> <a id="2476" class="Symbol">(</a><a id="2477" href="Relation.Binary.Structures.html#2361" class="Field">IsPreorder.trans</a> <a id="2494" href="Structure.Monad.html#1520" class="Bound">pre</a><a id="2497" class="Symbol">)</a> <a id="2499" href="Structure.Monad.html#2459" class="Bound">σ</a> <a id="2501" href="Structure.Monad.html#2461" class="Bound">px</a> 

  <a id="Closure.mk◇"></a><a id="2508" href="Structure.Monad.html#2508" class="Function">mk◇</a> <a id="2512" class="Symbol">:</a> <a id="2514" class="Symbol">∀</a> <a id="2516" class="Symbol">{</a><a id="2517" href="Structure.Monad.html#2517" class="Bound">P</a> <a id="2519" class="Symbol">:</a> <a id="2521" href="Core.html#316" class="Function">Pred</a> <a id="2526" href="Structure.Monad.html#1491" class="Bound">A</a><a id="2527" class="Symbol">}</a> <a id="2529" class="Symbol">{</a><a id="2530" href="Structure.Monad.html#2530" class="Bound">x</a><a id="2531" class="Symbol">}</a> <a id="2533" class="Symbol">→</a> <a id="2535" href="Structure.Monad.html#2517" class="Bound">P</a> <a id="2537" href="Structure.Monad.html#2530" class="Bound">x</a> <a id="2539" class="Symbol">→</a> <a id="2541" href="Relation.Unary.Closure.Base.html#1717" class="Function">◇</a> <a id="2543" href="Structure.Monad.html#2517" class="Bound">P</a> <a id="2545" href="Structure.Monad.html#2530" class="Bound">x</a>
  <a id="2549" href="Structure.Monad.html#2508" class="Function">mk◇</a> <a id="2553" class="Symbol">=</a> <a id="2555" href="Relation.Unary.Closure.Base.html#3879" class="Function">◇.pure</a> <a id="2562" class="Symbol">(</a><a id="2563" href="Relation.Binary.Structures.html#2331" class="Field">IsPreorder.reflexive</a> <a id="2584" href="Structure.Monad.html#1520" class="Bound">pre</a> <a id="2588" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="2592" class="Symbol">)</a>

<a id="2595" class="Comment">-- module _ where</a>

<a id="2614" class="Comment">--   open import Signature</a>
<a id="2641" class="Comment">--   open import Data.List.Relation.Binary.Sublist.Propositional</a>

<a id="2707" class="Comment">--   Monadic : Eff → Set₁</a>
<a id="2733" class="Comment">--   Monadic M = ∀ {σ} {V : μ σ → Sto (μ σ) → Set} {Γ} → RawMonad (M V Γ)</a>

<a id="2808" class="Comment">--   HasStrength : ∀ {M : Eff} → Monadic M → Set₁</a>
<a id="2858" class="Comment">--   HasStrength mon = ∀ {σ} {V : μ σ → Sto (μ σ) → Set} {Γ} → Wk.Strength _⊆_ (mon {σ} {V} {Γ})</a>

  
</pre></body></html>