<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Fragment.General</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Pragma">--without-K</a> <a id="32" class="Symbol">#-}</a>

<a id="37" class="Keyword">module</a> <a id="44" href="Fragment.General.html" class="Module">Fragment.General</a> <a id="61" class="Keyword">where</a>

<a id="68" class="Comment">-- Framework code + stdlib imports</a>
<a id="103" class="Keyword">open</a> <a id="108" class="Keyword">import</a> <a id="115" href="Prelude.html" class="Module">Prelude</a>

<a id="124" class="Comment">-- Effect interfaces </a>
<a id="146" class="Keyword">open</a> <a id="151" class="Keyword">import</a> <a id="158" href="Interface.General.html" class="Module">Interface.General</a>
<a id="176" class="Keyword">open</a> <a id="181" class="Keyword">import</a> <a id="188" href="Interface.Lambda.html" class="Module">Interface.Lambda</a>

<a id="206" class="Comment">-- Canonical forms</a>
<a id="225" class="Keyword">open</a> <a id="230" class="Keyword">import</a> <a id="237" href="Canon.Function.html" class="Module">Canon.Function</a>

<a id="253" class="Keyword">import</a> <a id="260" href="Level.html" class="Module">Level</a> <a id="266" class="Symbol">as</a> <a id="269" class="Module">L</a>

<a id="272" class="Comment">--</a>
<a id="275" class="Comment">-- A fragment for General recursion</a>
<a id="311" class="Comment">-- </a>
<a id="315" class="Keyword">module</a> <a id="322" href="Fragment.General.html#322" class="Module">_</a> <a id="324" class="Keyword">where</a> 

  <a id="334" class="Keyword">open</a> <a id="339" href="Box.html#603" class="Module">Necessary</a>
  <a id="351" class="Keyword">open</a> <a id="356" href="MonadicFragment.html#1210" class="Module">Itf</a> <a id="360" href="Core.html#507" class="Function">Sto</a>

  
  <a id="370" class="Keyword">data</a> <a id="375" href="Fragment.General.html#375" class="Datatype">GeneralExprShape</a> <a id="392" class="Symbol">⦃</a> <a id="394" href="Fragment.General.html#394" class="Bound">_</a> <a id="396" class="Symbol">:</a> <a id="398" href="Canon.Function.html#445" class="Function">TFunctionΣ</a> <a id="409" href="Signature.html#4467" class="Record Operator">≼</a> <a id="411" href="Signature.html#861" class="Generalizable">σ</a> <a id="413" class="Symbol">⦄</a> <a id="415" class="Symbol">:</a> <a id="417" class="Symbol">(</a><a id="418" href="Core.html#379" class="Function">Ctx</a> <a id="422" class="Symbol">(</a><a id="423" href="Signature.html#1143" class="Datatype">μ</a> <a id="425" href="Fragment.General.html#411" class="Bound">σ</a><a id="426" class="Symbol">)</a> <a id="428" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="430" href="Signature.html#1143" class="Datatype">μ</a> <a id="432" href="Fragment.General.html#411" class="Bound">σ</a><a id="433" class="Symbol">)</a> <a id="435" class="Symbol">→</a> <a id="437" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="441" class="Keyword">where</a>
    <a id="451" href="Fragment.General.html#451" class="InductiveConstructor">fix</a> <a id="455" class="Symbol">:</a> <a id="457" class="Symbol">∀</a> <a id="459" class="Symbol">{</a><a id="460" href="Fragment.General.html#460" class="Bound">Γ</a><a id="461" class="Symbol">}</a> <a id="463" class="Symbol">{</a><a id="464" href="Fragment.General.html#464" class="Bound">s</a> <a id="466" href="Fragment.General.html#466" class="Bound">t</a> <a id="468" class="Symbol">:</a> <a id="470" href="Signature.html#1143" class="Datatype">μ</a> <a id="472" href="Fragment.General.html#411" class="Bound">σ</a><a id="473" class="Symbol">}</a> <a id="475" class="Symbol">→</a> <a id="477" href="Fragment.General.html#375" class="Datatype">GeneralExprShape</a> <a id="494" class="Symbol">(</a><a id="495" href="Fragment.General.html#460" class="Bound">Γ</a> <a id="497" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="499" href="Canon.Function.html#494" class="Function">fun′</a> <a id="504" href="Fragment.General.html#464" class="Bound">s</a> <a id="506" href="Fragment.General.html#466" class="Bound">t</a><a id="507" class="Symbol">)</a>

  <a id="512" href="Fragment.General.html#512" class="Function">GeneralExprΣ</a> <a id="525" class="Symbol">:</a> <a id="527" href="MonadicFragment.html#2503" class="Function">Expressions</a> <a id="539" href="Core.html#507" class="Function">Sto</a> <a id="543" href="Canon.Function.html#445" class="Function">TFunctionΣ</a>
  <a id="556" href="Fragment.General.html#512" class="Function">GeneralExprΣ</a> <a id="569" class="Symbol">=</a> <a id="571" href="Fragment.General.html#375" class="Datatype">GeneralExprShape</a> <a id="588" href="Signature.html#2677" class="InductiveConstructor Operator">▸</a> <a id="590" class="Symbol">λ</a> <a id="592" class="Keyword">where</a>
    <a id="602" class="Symbol">(</a><a id="603" href="Fragment.General.html#451" class="InductiveConstructor">fix</a> <a id="607" class="Symbol">{</a><a id="608" href="Fragment.General.html#608" class="Bound">Γ</a><a id="609" class="Symbol">}</a> <a id="611" class="Symbol">{</a><a id="612" href="Fragment.General.html#612" class="Bound">s</a><a id="613" class="Symbol">}</a> <a id="615" class="Symbol">{</a><a id="616" href="Fragment.General.html#616" class="Bound">t</a><a id="617" class="Symbol">})</a> <a id="620" class="Symbol">→</a> <a id="622" class="Symbol">(</a><a id="623" href="Fragment.General.html#612" class="Bound">s</a> <a id="625" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="627" href="Canon.Function.html#494" class="Function">fun′</a> <a id="632" href="Fragment.General.html#612" class="Bound">s</a> <a id="634" href="Fragment.General.html#616" class="Bound">t</a> <a id="636" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="638" href="Fragment.General.html#608" class="Bound">Γ</a> <a id="640" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="642" href="Fragment.General.html#616" class="Bound">t</a><a id="643" class="Symbol">)</a> <a id="645" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="647" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>

  <a id="653" class="Keyword">module</a> <a id="660" href="Fragment.General.html#660" class="Module">_</a> <a id="662" class="Symbol">(</a><a id="663" href="Fragment.General.html#663" class="Bound">M</a> <a id="665" class="Symbol">:</a> <a id="667" href="MonadicFragment.html#768" class="Function">Eff</a> <a id="671" href="Core.html#507" class="Function">Sto</a><a id="674" class="Symbol">)</a>
         <a id="685" class="Symbol">⦃</a> <a id="687" href="Fragment.General.html#687" class="Bound">mon</a> <a id="691" class="Symbol">:</a> <a id="693" href="MonadicFragment.html#1251" class="Record">Monadic</a> <a id="701" href="Fragment.General.html#663" class="Bound">M</a> <a id="703" class="Symbol">⦄</a>
         <a id="714" class="Symbol">⦃</a> <a id="716" href="Fragment.General.html#716" class="Bound">_</a>   <a id="720" class="Symbol">:</a> <a id="722" href="Interface.General.html#670" class="Record">General</a> <a id="730" href="Fragment.General.html#663" class="Bound">M</a> <a id="732" class="Symbol">⦄</a> 
         <a id="744" class="Keyword">where</a>

    <a id="755" class="Keyword">module</a> <a id="762" href="Fragment.General.html#762" class="Module">_</a> <a id="764" class="Symbol">{</a><a id="765" href="Fragment.General.html#765" class="Bound">σ</a><a id="766" class="Symbol">}</a> <a id="768" class="Symbol">{</a><a id="769" href="Fragment.General.html#769" class="Bound">V</a> <a id="771" class="Symbol">:</a> <a id="773" href="Canon.html#826" class="Record">Values</a> <a id="780" href="Core.html#507" class="Function">Sto</a> <a id="784" href="Fragment.General.html#765" class="Bound">σ</a><a id="785" class="Symbol">}</a> <a id="787" class="Keyword">where</a>
      <a id="799" class="Keyword">open</a> <a id="804" href="Structure.Monad.html#1065" class="Module">Wk</a> <a id="807" class="Symbol">{</a><a id="808" class="Argument">A</a> <a id="810" class="Symbol">=</a> <a id="812" href="Core.html#507" class="Function">Sto</a> <a id="816" class="Symbol">(</a><a id="817" href="Signature.html#1143" class="Datatype">μ</a> <a id="819" href="Fragment.General.html#765" class="Bound">σ</a><a id="820" class="Symbol">)}</a> <a id="823" href="Data.List.Relation.Binary.Sublist.Setoid.html#1328" class="Function Operator">_⊆_</a>

      <a id="834" class="Keyword">open</a> <a id="839" href="Interface.General.html#670" class="Module">General</a> <a id="847" class="Symbol">⦃...⦄</a>
      

      <a id="867" href="Fragment.General.html#867" class="Function">interpGeneral</a> <a id="881" class="Symbol">:</a>   <a id="885" class="Symbol">⦃</a> <a id="887" href="Fragment.General.html#887" class="Bound">_</a> <a id="889" class="Symbol">:</a> <a id="891" href="Canon.Function.html#607" class="Function">FunctionVal</a> <a id="903" href="Canon.html#2686" class="Record Operator">⊑</a> <a id="905" href="Fragment.General.html#769" class="Bound">V</a> <a id="907" class="Symbol">⦄</a>
                      <a id="931" class="Symbol">→</a> <a id="933" class="Symbol">⦃</a> <a id="935" href="MonadicFragment.html#1743" class="Record">IsWeakenable</a> <a id="948" href="Fragment.General.html#769" class="Bound">V</a>      <a id="955" class="Symbol">⦄</a>
                      <a id="979" class="Symbol">→</a> <a id="981" href="Signature.html#3654" class="Record">IAlgebra</a> <a id="990" href="Fragment.General.html#512" class="Function">GeneralExprΣ</a> <a id="1003" class="Symbol">λ</a> <a id="1005" class="Symbol">(</a><a id="1006" href="Fragment.General.html#1006" class="Bound">Γ</a> <a id="1008" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1010" href="Fragment.General.html#1010" class="Bound">t</a><a id="1011" class="Symbol">)</a> <a id="1013" class="Symbol">→</a> <a id="1015" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="1018" href="Fragment.General.html#663" class="Bound">M</a> <a id="1020" class="Symbol">(</a><a id="1021" href="Signature.html#2146" class="Function">para</a> <a id="1026" class="Symbol">(</a><a id="1027" href="Canon.html#923" class="Field">out</a> <a id="1031" href="Fragment.General.html#769" class="Bound">V</a><a id="1032" class="Symbol">))</a> <a id="1035" href="Fragment.General.html#1006" class="Bound">Γ</a> <a id="1037" class="Symbol">(</a><a id="1038" href="Signature.html#2146" class="Function">para</a> <a id="1043" class="Symbol">(</a><a id="1044" href="Canon.html#923" class="Field">out</a> <a id="1048" href="Fragment.General.html#769" class="Bound">V</a><a id="1049" class="Symbol">)</a> <a id="1051" href="Fragment.General.html#1010" class="Bound">t</a><a id="1052" class="Symbol">)</a> <a id="1054" href="Relation.Unary.html#3359" class="Function">]</a>
      <a id="1062" href="Signature.html#3726" class="Field">ialg</a> <a id="1067" href="Fragment.General.html#867" class="Function">interpGeneral</a> <a id="1081" class="Symbol">(</a><a id="1082" href="Fragment.General.html#451" class="InductiveConstructor">fix</a> <a id="1086" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1088" href="Level.html#457" class="InductiveConstructor">L.lift</a> <a id="1095" class="Symbol">(</a><a id="1096" href="Fragment.General.html#1096" class="Bound">tm</a> <a id="1099" href="Data.List.Relation.Unary.All.html#1477" class="InductiveConstructor Operator">∷</a> <a id="1101" href="Data.List.Relation.Unary.All.html#1460" class="InductiveConstructor">[]</a><a id="1103" class="Symbol">))</a> <a id="1106" class="Symbol">=</a> <a id="1108" class="Keyword">do</a>
        <a id="1119" href="Fragment.General.html#1119" class="Bound">clos</a> <a id="1124" href="MonadicFragment.html#1515" class="Function Operator">←</a> <a id="1126" href="Interface.General.html#701" class="Field">general</a> <a id="1134" href="Canon.html#12054" class="Function">↑</a> <a id="1136" href="Fragment.General.html#1096" class="Bound">tm</a>
        <a id="1147" href="MonadicFragment.html#1377" class="Function">return</a> <a id="1154" class="Symbol">(</a><a id="1155" href="Canon.html#12054" class="Function">↑</a> <a id="1157" href="Fragment.General.html#1119" class="Bound">clos</a><a id="1161" class="Symbol">)</a>


    <a id="1169" href="Fragment.General.html#1169" class="Function">Rec</a> <a id="1173" class="Symbol">:</a> <a id="1175" href="Box.html#690" class="Record">□</a> <a id="1177" class="Symbol">(</a><a id="1178" href="MonadicFragment.html#2639" class="Record">MonadicFragment</a> <a id="1194" href="Core.html#507" class="Function">Sto</a> <a id="1198" href="Fragment.General.html#663" class="Bound">M</a><a id="1199" class="Symbol">)</a> <a id="1201" href="Canon.Function.html#729" class="Function">funCanon</a>
    <a id="1214" href="MonadicFragment.html#2710" class="Field">MonadicFragment.exprᵐ</a>   <a id="1238" class="Symbol">(</a><a id="1239" href="Box.html#759" class="Field">□.future</a> <a id="1248" href="Fragment.General.html#1169" class="Function">Rec</a> <a id="1252" href="Fragment.General.html#1252" class="Bound">r</a><a id="1253" class="Symbol">)</a> <a id="1255" class="Symbol">=</a> <a id="1257" href="Fragment.General.html#512" class="Function">GeneralExprΣ</a>
    <a id="1274" href="MonadicFragment.html#2799" class="Field">MonadicFragment.interpᵐ</a> <a id="1298" class="Symbol">(</a><a id="1299" href="Box.html#759" class="Field">□.future</a> <a id="1308" href="Fragment.General.html#1169" class="Function">Rec</a> <a id="1312" href="Fragment.General.html#1312" class="Bound">r</a><a id="1313" class="Symbol">)</a> <a id="1315" class="Symbol">=</a> <a id="1317" href="Fragment.General.html#867" class="Function">interpGeneral</a> <a id="1331" class="Symbol">⦃</a> <a id="1333" href="Fragment.General.html#1312" class="Bound">r</a> <a id="1335" class="Symbol">⦄</a>
</pre></body></html>