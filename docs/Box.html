<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Box</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Pragma">--without-K</a> <a id="32" class="Symbol">#-}</a>

<a id="37" class="Keyword">open</a> <a id="42" class="Keyword">import</a> <a id="49" href="Relation.Unary.html" class="Module">Relation.Unary</a>
<a id="64" class="Keyword">import</a> <a id="71" href="Level.html" class="Module">Level</a> <a id="77" class="Symbol">as</a> <a id="80" class="Module">L</a>

<a id="83" class="Keyword">module</a> <a id="90" href="Box.html" class="Module">Box</a> <a id="94" class="Keyword">where</a> 

  <a id="104" class="Comment">{- A notion of types with preorders -}</a>
  <a id="145" class="Keyword">module</a> <a id="152" href="Box.html#152" class="Module">_</a> <a id="154" class="Keyword">where</a>

    <a id="165" class="Keyword">record</a> <a id="172" href="Box.html#172" class="Record">Rel₂</a> <a id="177" class="Symbol">{</a><a id="178" href="Box.html#178" class="Bound">a</a><a id="179" class="Symbol">}</a> <a id="181" class="Symbol">(</a><a id="182" href="Box.html#182" class="Bound">ℓ</a> <a id="184" class="Symbol">:</a> <a id="186" href="Agda.Primitive.html#523" class="Postulate">L.Level</a><a id="193" class="Symbol">)</a> <a id="195" class="Symbol">(</a><a id="196" href="Box.html#196" class="Bound">A</a> <a id="198" class="Symbol">:</a> <a id="200" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="204" href="Box.html#178" class="Bound">a</a><a id="205" class="Symbol">)</a> <a id="207" class="Symbol">:</a> <a id="209" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="213" class="Symbol">(</a><a id="214" href="Box.html#178" class="Bound">a</a> <a id="216" href="Agda.Primitive.html#736" class="Primitive Operator">L.⊔</a> <a id="220" href="Agda.Primitive.html#706" class="Primitive">L.suc</a> <a id="226" href="Box.html#182" class="Bound">ℓ</a><a id="227" class="Symbol">)</a> <a id="229" class="Keyword">where</a> 
      <a id="242" class="Keyword">field</a> <a id="248" href="Box.html#248" class="Field">R</a>     <a id="254" class="Symbol">:</a> <a id="256" href="Box.html#196" class="Bound">A</a> <a id="258" class="Symbol">→</a> <a id="260" href="Box.html#196" class="Bound">A</a> <a id="262" class="Symbol">→</a> <a id="264" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="268" href="Box.html#182" class="Bound">ℓ</a>
            <a id="282" href="Box.html#282" class="Field">refl</a>  <a id="288" class="Symbol">:</a> <a id="290" class="Symbol">∀</a> <a id="292" class="Symbol">{</a><a id="293" href="Box.html#293" class="Bound">x</a><a id="294" class="Symbol">}</a>                     <a id="316" class="Symbol">→</a> <a id="318" href="Box.html#248" class="Field">R</a> <a id="320" href="Box.html#293" class="Bound">x</a> <a id="322" href="Box.html#293" class="Bound">x</a>
            <a id="336" href="Box.html#336" class="Field">trans</a> <a id="342" class="Symbol">:</a> <a id="344" class="Symbol">∀</a> <a id="346" class="Symbol">{</a><a id="347" href="Box.html#347" class="Bound">x</a> <a id="349" href="Box.html#349" class="Bound">y</a> <a id="351" href="Box.html#351" class="Bound">z</a><a id="352" class="Symbol">}</a> <a id="354" class="Symbol">→</a> <a id="356" href="Box.html#248" class="Field">R</a> <a id="358" href="Box.html#347" class="Bound">x</a> <a id="360" href="Box.html#349" class="Bound">y</a> <a id="362" class="Symbol">→</a> <a id="364" href="Box.html#248" class="Field">R</a> <a id="366" href="Box.html#349" class="Bound">y</a> <a id="368" href="Box.html#351" class="Bound">z</a> <a id="370" class="Symbol">→</a> <a id="372" href="Box.html#248" class="Field">R</a> <a id="374" href="Box.html#347" class="Bound">x</a> <a id="376" href="Box.html#351" class="Bound">z</a>

  <a id="381" class="Comment">{- Kripke semantics of Box (necessity) modality. We define □ for all types
     that have an associated preorder (i.e., instance of `Rel₂`), which is used
     to relate the current world to the future world  -}</a> 
  <a id="596" class="Keyword">module</a> <a id="Necessary"></a><a id="603" href="Box.html#603" class="Module">Necessary</a> <a id="613" class="Symbol">{</a><a id="614" href="Box.html#614" class="Bound">i</a> <a id="616" href="Box.html#616" class="Bound">ℓ</a><a id="617" class="Symbol">}</a> <a id="619" class="Symbol">{</a><a id="620" href="Box.html#620" class="Bound">I</a> <a id="622" class="Symbol">:</a> <a id="624" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="628" href="Box.html#614" class="Bound">i</a><a id="629" class="Symbol">}</a> <a id="631" class="Symbol">⦃</a> <a id="633" href="Box.html#633" class="Bound">_</a> <a id="635" class="Symbol">:</a> <a id="637" href="Box.html#172" class="Record">Rel₂</a> <a id="642" href="Box.html#616" class="Bound">ℓ</a> <a id="644" href="Box.html#620" class="Bound">I</a> <a id="646" class="Symbol">⦄</a> <a id="648" class="Keyword">where</a> 
  
    <a id="662" class="Keyword">open</a> <a id="667" href="Box.html#172" class="Module">Rel₂</a> <a id="672" class="Symbol">⦃...⦄</a>

    <a id="683" class="Keyword">record</a> <a id="Necessary.□"></a><a id="690" href="Box.html#690" class="Record">□</a> <a id="692" class="Symbol">(</a><a id="693" href="Box.html#693" class="Bound">P</a> <a id="695" class="Symbol">:</a> <a id="697" href="Box.html#620" class="Bound">I</a> <a id="699" class="Symbol">→</a> <a id="701" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="705" class="Symbol">(</a><a id="706" href="Box.html#614" class="Bound">i</a> <a id="708" href="Agda.Primitive.html#736" class="Primitive Operator">L.⊔</a> <a id="712" href="Box.html#616" class="Bound">ℓ</a><a id="713" class="Symbol">))</a> <a id="716" class="Symbol">(</a><a id="717" href="Box.html#717" class="Bound">x</a> <a id="719" class="Symbol">:</a> <a id="721" href="Box.html#620" class="Bound">I</a><a id="722" class="Symbol">)</a> <a id="724" class="Symbol">:</a> <a id="726" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="730" class="Symbol">(</a><a id="731" href="Box.html#614" class="Bound">i</a> <a id="733" href="Agda.Primitive.html#736" class="Primitive Operator">L.⊔</a> <a id="737" href="Box.html#616" class="Bound">ℓ</a><a id="738" class="Symbol">)</a> <a id="740" class="Keyword">where</a> 
      <a id="753" class="Keyword">field</a> <a id="Necessary.□.future"></a><a id="759" href="Box.html#759" class="Field">future</a> <a id="766" class="Symbol">:</a> <a id="768" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="771" href="Box.html#248" class="Field">R</a> <a id="773" href="Box.html#717" class="Bound">x</a> <a id="775" href="Relation.Unary.html#4338" class="Function Operator">⇒</a> <a id="777" href="Box.html#693" class="Bound">P</a> <a id="779" href="Relation.Unary.html#3359" class="Function">]</a>

    <a id="786" class="Keyword">open</a> <a id="791" href="Box.html#690" class="Module">□</a>


    <a id="799" class="Comment">----------------------------------------------------------------------------</a>
    <a id="880" class="Comment">--- </a>
    <a id="889" class="Comment">--- Comonadic operations  </a>
    
    <a id="Necessary.extract"></a><a id="925" href="Box.html#925" class="Function">extract</a> <a id="933" class="Symbol">:</a> <a id="935" class="Symbol">∀</a> <a id="937" class="Symbol">{</a><a id="938" href="Box.html#938" class="Bound">P</a><a id="939" class="Symbol">}</a> <a id="941" class="Symbol">→</a> <a id="943" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="946" href="Box.html#690" class="Record">□</a> <a id="948" href="Box.html#938" class="Bound">P</a> <a id="950" href="Relation.Unary.html#4338" class="Function Operator">⇒</a> <a id="952" href="Box.html#938" class="Bound">P</a> <a id="954" href="Relation.Unary.html#3359" class="Function">]</a>
    <a id="960" href="Box.html#925" class="Function">extract</a> <a id="968" href="Box.html#968" class="Bound">px</a> <a id="971" class="Symbol">=</a> <a id="973" href="Box.html#759" class="Field">future</a> <a id="980" href="Box.html#968" class="Bound">px</a> <a id="983" href="Box.html#282" class="Field">refl</a>
  
    <a id="Necessary.duplicate"></a><a id="995" href="Box.html#995" class="Function">duplicate</a> <a id="1005" class="Symbol">:</a> <a id="1007" class="Symbol">∀</a> <a id="1009" class="Symbol">{</a><a id="1010" href="Box.html#1010" class="Bound">P</a><a id="1011" class="Symbol">}</a> <a id="1013" class="Symbol">→</a> <a id="1015" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="1018" href="Box.html#690" class="Record">□</a> <a id="1020" href="Box.html#1010" class="Bound">P</a> <a id="1022" href="Relation.Unary.html#4338" class="Function Operator">⇒</a> <a id="1024" href="Box.html#690" class="Record">□</a> <a id="1026" class="Symbol">(</a><a id="1027" href="Box.html#690" class="Record">□</a> <a id="1029" href="Box.html#1010" class="Bound">P</a><a id="1030" class="Symbol">)</a> <a id="1032" href="Relation.Unary.html#3359" class="Function">]</a>
    <a id="1038" href="Box.html#759" class="Field">future</a> <a id="1045" class="Symbol">(</a><a id="1046" href="Box.html#759" class="Field">future</a> <a id="1053" class="Symbol">(</a><a id="1054" href="Box.html#995" class="Function">duplicate</a> <a id="1064" href="Box.html#1064" class="Bound">px</a><a id="1066" class="Symbol">)</a> <a id="1068" href="Box.html#1068" class="Bound">r₁</a><a id="1070" class="Symbol">)</a> <a id="1072" href="Box.html#1072" class="Bound">r₂</a> <a id="1075" class="Symbol">=</a> <a id="1077" href="Box.html#759" class="Field">future</a> <a id="1084" href="Box.html#1064" class="Bound">px</a> <a id="1087" class="Symbol">(</a><a id="1088" href="Box.html#336" class="Field">trans</a> <a id="1094" href="Box.html#1068" class="Bound">r₁</a> <a id="1097" href="Box.html#1072" class="Bound">r₂</a><a id="1099" class="Symbol">)</a>


    <a id="1107" class="Comment">----------------------------------------------------------------------------</a>
    <a id="1188" class="Comment">---</a>
    <a id="1196" class="Comment">--- Some auxiliary operations for working with □ types</a>

    <a id="Necessary.□-lift"></a><a id="1256" href="Box.html#1256" class="Function">□-lift</a> <a id="1263" class="Symbol">:</a> <a id="1265" class="Symbol">∀</a> <a id="1267" class="Symbol">{</a><a id="1268" href="Box.html#1268" class="Bound">P</a> <a id="1270" href="Box.html#1270" class="Bound">Q</a><a id="1271" class="Symbol">}</a> <a id="1273" class="Symbol">→</a> <a id="1275" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="1278" href="Box.html#1268" class="Bound">P</a> <a id="1280" href="Relation.Unary.html#4338" class="Function Operator">⇒</a> <a id="1282" href="Box.html#1270" class="Bound">Q</a> <a id="1284" href="Relation.Unary.html#3359" class="Function">]</a> <a id="1286" class="Symbol">→</a> <a id="1288" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="1291" href="Box.html#690" class="Record">□</a> <a id="1293" href="Box.html#1268" class="Bound">P</a> <a id="1295" href="Relation.Unary.html#4338" class="Function Operator">⇒</a> <a id="1297" href="Box.html#690" class="Record">□</a> <a id="1299" href="Box.html#1270" class="Bound">Q</a> <a id="1301" href="Relation.Unary.html#3359" class="Function">]</a>
    <a id="1307" href="Box.html#759" class="Field">future</a> <a id="1314" class="Symbol">(</a><a id="1315" href="Box.html#1256" class="Function">□-lift</a> <a id="1322" href="Box.html#1322" class="Bound">f</a> <a id="1324" href="Box.html#1324" class="Bound">x</a><a id="1325" class="Symbol">)</a> <a id="1327" href="Box.html#1327" class="Bound">r</a> <a id="1329" class="Symbol">=</a> <a id="1331" href="Box.html#1322" class="Bound">f</a> <a id="1333" class="Symbol">(</a><a id="1334" href="Box.html#759" class="Field">future</a> <a id="1341" href="Box.html#1324" class="Bound">x</a> <a id="1343" href="Box.html#1327" class="Bound">r</a><a id="1344" class="Symbol">)</a>

    <a id="Necessary.□-distr-⇒"></a><a id="1351" href="Box.html#1351" class="Function">□-distr-⇒</a> <a id="1361" class="Symbol">:</a> <a id="1363" class="Symbol">∀</a> <a id="1365" class="Symbol">{</a><a id="1366" href="Box.html#1366" class="Bound">P</a> <a id="1368" href="Box.html#1368" class="Bound">Q</a><a id="1369" class="Symbol">}</a> <a id="1371" class="Symbol">→</a> <a id="1373" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="1376" href="Box.html#690" class="Record">□</a> <a id="1378" class="Symbol">(</a><a id="1379" href="Box.html#1366" class="Bound">P</a> <a id="1381" href="Relation.Unary.html#4338" class="Function Operator">⇒</a> <a id="1383" href="Box.html#1368" class="Bound">Q</a><a id="1384" class="Symbol">)</a> <a id="1386" href="Relation.Unary.html#4338" class="Function Operator">⇒</a> <a id="1388" href="Box.html#690" class="Record">□</a> <a id="1390" href="Box.html#1366" class="Bound">P</a> <a id="1392" href="Relation.Unary.html#4338" class="Function Operator">⇒</a> <a id="1394" href="Box.html#690" class="Record">□</a> <a id="1396" href="Box.html#1368" class="Bound">Q</a> <a id="1398" href="Relation.Unary.html#3359" class="Function">]</a> 
    <a id="1405" href="Box.html#759" class="Field">future</a> <a id="1412" class="Symbol">(</a><a id="1413" href="Box.html#1351" class="Function">□-distr-⇒</a> <a id="1423" href="Box.html#1423" class="Bound">f</a> <a id="1425" href="Box.html#1425" class="Bound">x</a><a id="1426" class="Symbol">)</a> <a id="1428" href="Box.html#1428" class="Bound">r</a> <a id="1430" class="Symbol">=</a> <a id="1432" href="Box.html#759" class="Field">future</a> <a id="1439" href="Box.html#1423" class="Bound">f</a> <a id="1441" href="Box.html#1428" class="Bound">r</a> <a id="1443" class="Symbol">(</a><a id="1444" href="Box.html#759" class="Field">future</a> <a id="1451" href="Box.html#1425" class="Bound">x</a> <a id="1453" href="Box.html#1428" class="Bound">r</a><a id="1454" class="Symbol">)</a>

    <a id="Necessary.weaken"></a><a id="1461" href="Box.html#1461" class="Function">weaken</a> <a id="1468" class="Symbol">:</a> <a id="1470" class="Symbol">∀</a> <a id="1472" class="Symbol">{</a><a id="1473" href="Box.html#1473" class="Bound">P</a> <a id="1475" href="Box.html#1475" class="Bound">x</a> <a id="1477" href="Box.html#1477" class="Bound">y</a><a id="1478" class="Symbol">}</a> <a id="1480" class="Symbol">→</a> <a id="1482" href="Box.html#690" class="Record">□</a> <a id="1484" href="Box.html#1473" class="Bound">P</a> <a id="1486" href="Box.html#1475" class="Bound">x</a> <a id="1488" class="Symbol">→</a> <a id="1490" href="Box.html#248" class="Field">R</a> <a id="1492" href="Box.html#1475" class="Bound">x</a> <a id="1494" href="Box.html#1477" class="Bound">y</a> <a id="1496" class="Symbol">→</a> <a id="1498" href="Box.html#690" class="Record">□</a> <a id="1500" href="Box.html#1473" class="Bound">P</a> <a id="1502" href="Box.html#1477" class="Bound">y</a> 
    <a id="1509" href="Box.html#1461" class="Function">weaken</a> <a id="1516" href="Box.html#1516" class="Bound">px</a> <a id="1519" class="Symbol">=</a> <a id="1521" href="Box.html#759" class="Field">future</a> <a id="1528" class="Symbol">(</a><a id="1529" href="Box.html#995" class="Function">duplicate</a> <a id="1539" href="Box.html#1516" class="Bound">px</a><a id="1541" class="Symbol">)</a>
  
</pre></body></html>