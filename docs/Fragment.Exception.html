<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Fragment.Exception</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Pragma">--without-K</a> <a id="32" class="Symbol">#-}</a>

<a id="37" class="Keyword">module</a> <a id="44" href="Fragment.Exception.html" class="Module">Fragment.Exception</a> <a id="63" class="Keyword">where</a>

<a id="70" class="Comment">-- Framework code + stdlib imports</a>
<a id="105" class="Keyword">open</a> <a id="110" class="Keyword">import</a> <a id="117" href="Prelude.html" class="Module">Prelude</a>

<a id="126" class="Comment">-- Effect interfaces </a>
<a id="148" class="Keyword">open</a> <a id="153" class="Keyword">import</a> <a id="160" href="Interface.Except.html" class="Module">Interface.Except</a>

<a id="178" class="Keyword">import</a> <a id="185" href="Level.html" class="Module">Level</a> <a id="191" class="Symbol">as</a> <a id="194" class="Module">L</a>

<a id="197" class="Comment">--</a>
<a id="200" class="Comment">-- A fragment for unchecked exceptions</a>
<a id="239" class="Comment">--</a>
<a id="242" class="Keyword">module</a> <a id="249" href="Fragment.Exception.html#249" class="Module">_</a> <a id="251" class="Symbol">{</a><a id="252" href="Fragment.Exception.html#252" class="Bound">Ix</a> <a id="255" class="Symbol">:</a> <a id="257" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="261" class="Symbol">→</a> <a id="263" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="266" class="Symbol">}</a> <a id="268" class="Symbol">⦃</a> <a id="270" href="Fragment.Exception.html#270" class="Bound">ix-rel</a> <a id="277" class="Symbol">:</a> <a id="279" class="Symbol">∀</a> <a id="281" class="Symbol">{</a><a id="282" href="Fragment.Exception.html#282" class="Bound">X</a><a id="283" class="Symbol">}</a> <a id="285" class="Symbol">→</a> <a id="287" href="Box.html#172" class="Record">Rel₂</a> <a id="292" href="Level.html#512" class="Function">L.0ℓ</a> <a id="297" class="Symbol">(</a><a id="298" href="Fragment.Exception.html#252" class="Bound">Ix</a> <a id="301" href="Fragment.Exception.html#282" class="Bound">X</a><a id="302" class="Symbol">)</a> <a id="304" class="Symbol">⦄</a> <a id="306" class="Keyword">where</a>

  <a id="315" class="Keyword">open</a> <a id="320" href="MonadicFragment.html#1210" class="Module">Itf</a> <a id="324" href="Fragment.Exception.html#252" class="Bound">Ix</a>
  <a id="329" class="Keyword">open</a> <a id="334" href="Box.html#603" class="Module">Necessary</a>

  <a id="347" class="Keyword">data</a> <a id="352" href="Fragment.Exception.html#352" class="Datatype">ExceptExprShape</a> <a id="368" class="Symbol">{</a><a id="369" href="Fragment.Exception.html#369" class="Bound">σ</a> <a id="371" class="Symbol">:</a> <a id="373" href="Signature.html#741" class="Record">Signature</a> <a id="383" href="Level.html#512" class="Function">L.0ℓ</a><a id="387" class="Symbol">}</a> <a id="389" class="Symbol">:</a> <a id="391" class="Symbol">(</a><a id="392" href="Core.html#379" class="Function">Ctx</a> <a id="396" class="Symbol">(</a><a id="397" href="Signature.html#1143" class="Datatype">μ</a> <a id="399" href="Fragment.Exception.html#369" class="Bound">σ</a><a id="400" class="Symbol">)</a> <a id="402" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="404" href="Signature.html#1143" class="Datatype">μ</a> <a id="406" href="Fragment.Exception.html#369" class="Bound">σ</a><a id="407" class="Symbol">)</a> <a id="409" class="Symbol">→</a> <a id="411" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="415" class="Keyword">where</a> 
    <a id="426" href="Fragment.Exception.html#426" class="InductiveConstructor">error</a> <a id="432" class="Symbol">:</a> <a id="434" class="Symbol">∀</a> <a id="436" class="Symbol">{</a><a id="437" href="Fragment.Exception.html#437" class="Bound">Γ</a><a id="438" class="Symbol">}</a> <a id="440" class="Symbol">→</a> <a id="442" class="Symbol">(</a><a id="443" href="Fragment.Exception.html#443" class="Bound">t</a> <a id="445" class="Symbol">:</a> <a id="447" href="Signature.html#1143" class="Datatype">μ</a> <a id="449" href="Fragment.Exception.html#369" class="Bound">σ</a><a id="450" class="Symbol">)</a> <a id="452" class="Symbol">→</a> <a id="454" href="Fragment.Exception.html#352" class="Datatype">ExceptExprShape</a> <a id="470" class="Symbol">(</a><a id="471" href="Fragment.Exception.html#437" class="Bound">Γ</a> <a id="473" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="475" href="Fragment.Exception.html#443" class="Bound">t</a><a id="476" class="Symbol">)</a>
    <a id="482" href="Fragment.Exception.html#482" class="InductiveConstructor">try</a>   <a id="488" class="Symbol">:</a> <a id="490" class="Symbol">∀</a> <a id="492" class="Symbol">{</a><a id="493" href="Fragment.Exception.html#493" class="Bound">Γ</a><a id="494" class="Symbol">}</a> <a id="496" class="Symbol">→</a> <a id="498" class="Symbol">(</a><a id="499" href="Fragment.Exception.html#499" class="Bound">t</a> <a id="501" class="Symbol">:</a> <a id="503" href="Signature.html#1143" class="Datatype">μ</a> <a id="505" href="Fragment.Exception.html#369" class="Bound">σ</a><a id="506" class="Symbol">)</a> <a id="508" class="Symbol">→</a> <a id="510" href="Fragment.Exception.html#352" class="Datatype">ExceptExprShape</a> <a id="526" class="Symbol">(</a><a id="527" href="Fragment.Exception.html#493" class="Bound">Γ</a> <a id="529" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="531" href="Fragment.Exception.html#499" class="Bound">t</a><a id="532" class="Symbol">)</a>

  <a id="537" href="Fragment.Exception.html#537" class="Function">ExceptExprΣ</a> <a id="549" class="Symbol">:</a> <a id="551" href="MonadicFragment.html#2503" class="Function">Expressions</a> <a id="563" href="Fragment.Exception.html#252" class="Bound">Ix</a> <a id="566" href="Signature.html#861" class="Generalizable">σ</a>
  <a id="570" href="Fragment.Exception.html#537" class="Function">ExceptExprΣ</a> <a id="582" class="Symbol">=</a> <a id="584" href="Fragment.Exception.html#352" class="Datatype">ExceptExprShape</a> <a id="600" href="Signature.html#2677" class="InductiveConstructor Operator">▸</a> <a id="602" class="Symbol">λ</a> <a id="604" class="Keyword">where</a>
    <a id="614" class="Symbol">(</a><a id="615" href="Fragment.Exception.html#426" class="InductiveConstructor">error</a> <a id="621" class="Symbol">_)</a> <a id="624" class="Symbol">→</a> <a id="626" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>
    <a id="633" class="Symbol">(</a><a id="634" href="Fragment.Exception.html#482" class="InductiveConstructor">try</a> <a id="638" class="Symbol">{</a><a id="639" class="Argument">Γ</a> <a id="641" class="Symbol">=</a> <a id="643" href="Fragment.Exception.html#643" class="Bound">Γ</a><a id="644" class="Symbol">}</a> <a id="646" href="Fragment.Exception.html#646" class="Bound">t</a><a id="647" class="Symbol">)</a> <a id="649" class="Symbol">→</a> <a id="651" class="Symbol">(</a><a id="652" href="Fragment.Exception.html#643" class="Bound">Γ</a> <a id="654" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="656" href="Fragment.Exception.html#646" class="Bound">t</a><a id="657" class="Symbol">)</a> <a id="659" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="661" class="Symbol">(</a><a id="662" href="Fragment.Exception.html#643" class="Bound">Γ</a> <a id="664" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="666" href="Fragment.Exception.html#646" class="Bound">t</a><a id="667" class="Symbol">)</a> <a id="669" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="671" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>

  <a id="677" class="Keyword">module</a> <a id="684" href="Fragment.Exception.html#684" class="Module">_</a> <a id="686" class="Symbol">(</a><a id="687" href="Fragment.Exception.html#687" class="Bound">M</a> <a id="689" class="Symbol">:</a> <a id="691" href="MonadicFragment.html#768" class="Function">Eff</a> <a id="695" href="Fragment.Exception.html#252" class="Bound">Ix</a><a id="697" class="Symbol">)</a>
           <a id="710" class="Symbol">⦃</a> <a id="712" href="Fragment.Exception.html#712" class="Bound">mon</a> <a id="716" class="Symbol">:</a> <a id="718" href="MonadicFragment.html#1251" class="Record">Monadic</a>   <a id="728" href="Fragment.Exception.html#687" class="Bound">M</a> <a id="730" class="Symbol">⦄</a>
           <a id="743" class="Symbol">⦃</a> <a id="745" href="Fragment.Exception.html#745" class="Bound">_</a>   <a id="749" class="Symbol">:</a> <a id="751" href="Interface.Except.html#600" class="Record">Exception</a> <a id="761" href="Fragment.Exception.html#252" class="Bound">Ix</a> <a id="764" href="Fragment.Exception.html#687" class="Bound">M</a> <a id="766" class="Symbol">⦄</a>
           <a id="779" class="Keyword">where</a>

    <a id="790" class="Keyword">module</a> <a id="797" href="Fragment.Exception.html#797" class="Module">_</a> <a id="799" class="Symbol">{</a><a id="800" href="Fragment.Exception.html#800" class="Bound">σ</a><a id="801" class="Symbol">}</a> <a id="803" class="Symbol">(</a><a id="804" href="Fragment.Exception.html#804" class="Bound">V</a> <a id="806" class="Symbol">:</a> <a id="808" href="Canon.html#826" class="Record">Values</a> <a id="815" href="Fragment.Exception.html#252" class="Bound">Ix</a> <a id="818" href="Fragment.Exception.html#800" class="Bound">σ</a><a id="819" class="Symbol">)</a> <a id="821" class="Keyword">where</a>

      <a id="834" class="Keyword">open</a> <a id="839" href="Interface.Except.html#600" class="Module">Exception</a>  <a id="850" class="Symbol">⦃...⦄</a>
      
      <a id="869" href="Fragment.Exception.html#869" class="Function">interpExcept</a> <a id="882" class="Symbol">:</a> <a id="884" href="Signature.html#3654" class="Record">IAlgebra</a> <a id="893" href="Fragment.Exception.html#537" class="Function">ExceptExprΣ</a> <a id="905" class="Symbol">λ</a> <a id="907" class="Symbol">(</a><a id="908" href="Fragment.Exception.html#908" class="Bound">Γ</a> <a id="910" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="912" href="Fragment.Exception.html#912" class="Bound">t</a><a id="913" class="Symbol">)</a> <a id="915" class="Symbol">→</a> <a id="917" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="920" href="Fragment.Exception.html#687" class="Bound">M</a> <a id="922" class="Symbol">(</a><a id="923" href="Signature.html#2146" class="Function">para</a> <a id="928" class="Symbol">(</a><a id="929" href="Canon.html#923" class="Field">out</a> <a id="933" href="Fragment.Exception.html#804" class="Bound">V</a><a id="934" class="Symbol">))</a> <a id="937" href="Fragment.Exception.html#908" class="Bound">Γ</a> <a id="939" class="Symbol">(</a><a id="940" href="Signature.html#2146" class="Function">para</a> <a id="945" class="Symbol">(</a><a id="946" href="Canon.html#923" class="Field">out</a> <a id="950" href="Fragment.Exception.html#804" class="Bound">V</a><a id="951" class="Symbol">)</a> <a id="953" href="Fragment.Exception.html#912" class="Bound">t</a><a id="954" class="Symbol">)</a> <a id="956" href="Relation.Unary.html#3359" class="Function">]</a>
      <a id="964" href="Signature.html#3726" class="Field">ialg</a> <a id="969" href="Fragment.Exception.html#869" class="Function">interpExcept</a> <a id="982" class="Symbol">(</a><a id="983" href="Fragment.Exception.html#426" class="InductiveConstructor">error</a> <a id="989" href="Fragment.Exception.html#989" class="Bound">t</a> <a id="991" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="993" href="Level.html#457" class="InductiveConstructor">L.lift</a> <a id="1000" href="Data.List.Relation.Unary.All.html#1460" class="InductiveConstructor">[]</a><a id="1002" class="Symbol">)</a>             <a id="1016" class="Symbol">=</a> <a id="1018" href="Interface.Except.html#640" class="Field">throw</a> <a id="1024" href="Fragment.Exception.html#989" class="Bound">t</a>
      <a id="1032" href="Signature.html#3726" class="Field">ialg</a> <a id="1037" href="Fragment.Exception.html#869" class="Function">interpExcept</a> <a id="1050" class="Symbol">(</a><a id="1051" href="Fragment.Exception.html#482" class="InductiveConstructor">try</a> <a id="1055" href="Fragment.Exception.html#1055" class="Bound">t</a> <a id="1057" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1059" href="Level.html#457" class="InductiveConstructor">L.lift</a> <a id="1066" class="Symbol">(</a><a id="1067" href="Fragment.Exception.html#1067" class="Bound">tm₁</a> <a id="1071" href="Data.List.Relation.Unary.All.html#1477" class="InductiveConstructor Operator">∷</a> <a id="1073" href="Fragment.Exception.html#1073" class="Bound">tm₂</a> <a id="1077" href="Data.List.Relation.Unary.All.html#1477" class="InductiveConstructor Operator">∷</a> <a id="1079" href="Data.List.Relation.Unary.All.html#1460" class="InductiveConstructor">[]</a><a id="1081" class="Symbol">))</a> <a id="1084" class="Symbol">=</a> <a id="1086" href="Interface.Except.html#694" class="Field">try-with</a> <a id="1095" href="Fragment.Exception.html#1055" class="Bound">t</a> <a id="1097" href="Fragment.Exception.html#1067" class="Bound">tm₁</a> <a id="1101" href="Fragment.Exception.html#1073" class="Bound">tm₂</a>

    <a id="1110" href="Fragment.Exception.html#1110" class="Function">Except</a> <a id="1117" class="Symbol">:</a> <a id="1119" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="1122" href="Box.html#690" class="Record">□</a> <a id="1124" class="Symbol">(</a><a id="1125" href="MonadicFragment.html#2639" class="Record">MonadicFragment</a> <a id="1141" href="Fragment.Exception.html#252" class="Bound">Ix</a> <a id="1144" href="Fragment.Exception.html#687" class="Bound">M</a><a id="1145" class="Symbol">)</a> <a id="1147" href="Relation.Unary.html#3359" class="Function">]</a>
    <a id="1153" href="MonadicFragment.html#2710" class="Field">MonadicFragment.exprᵐ</a>   <a id="1177" class="Symbol">(</a><a id="1178" href="Box.html#759" class="Field">□.future</a> <a id="1187" href="Fragment.Exception.html#1110" class="Function">Except</a> <a id="1194" class="Symbol">{</a><a id="1195" href="Fragment.Exception.html#1195" class="Bound">c′</a><a id="1197" class="Symbol">}</a> <a id="1199" href="Fragment.Exception.html#1199" class="Bound">r</a><a id="1200" class="Symbol">)</a> <a id="1202" class="Symbol">=</a> <a id="1204" href="Fragment.Exception.html#537" class="Function">ExceptExprΣ</a> <a id="1216" class="Symbol">{</a><a id="1217" class="Argument">σ</a> <a id="1219" class="Symbol">=</a> <a id="1221" href="Canon.html#1298" class="Field">ICanon.ity</a> <a id="1232" href="Fragment.Exception.html#1195" class="Bound">c′</a><a id="1234" class="Symbol">}</a>
    <a id="1240" href="MonadicFragment.html#2799" class="Field">MonadicFragment.interpᵐ</a> <a id="1264" class="Symbol">(</a><a id="1265" href="Box.html#759" class="Field">□.future</a> <a id="1274" href="Fragment.Exception.html#1110" class="Function">Except</a> <a id="1281" class="Symbol">{</a><a id="1282" href="Fragment.Exception.html#1282" class="Bound">c′</a><a id="1284" class="Symbol">}</a> <a id="1286" href="Fragment.Exception.html#1286" class="Bound">r</a><a id="1287" class="Symbol">)</a> <a id="1289" class="Symbol">=</a> <a id="1291" href="Fragment.Exception.html#869" class="Function">interpExcept</a> <a id="1304" class="Symbol">(</a><a id="1305" href="Canon.html#1328" class="Field">ICanon.ival</a> <a id="1317" href="Fragment.Exception.html#1282" class="Bound">c′</a><a id="1319" class="Symbol">)</a> 
</pre></body></html>